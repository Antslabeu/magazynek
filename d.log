[1mdiff --git a/.gitignore b/.gitignore[m
[1mdeleted file mode 100644[m
[1mindex d7afdf2..0000000[m
[1m--- a/.gitignore[m
[1m+++ /dev/null[m
[36m@@ -1,59 +0,0 @@[m
[31m-# Build output[m
[31m-bin/[m
[31m-obj/[m
[31m-[m
[31m-# User-specific files[m
[31m-*.user[m
[31m-*.userosscache[m
[31m-*.suo[m
[31m-*.userprefs[m
[31m-[m
[31m-# Visual Studio cache files[m
[31m-.vs/[m
[31m-[m
[31m-# Rider IDE files[m
[31m-.idea/[m
[31m-[m
[31m-# ASP.NET runtime files[m
[31m-wwwroot/lib/[m
[31m-[m
[31m-# Dotnet publish output[m
[31m-publish/[m
[31m-[m
[31m-# Logs[m
[31m-*.log[m
[31m-[m
[31m-# NuGet packages[m
[31m-*.nupkg[m
[31m-# The packages folder can be ignored because of PackageReference[m
[31m-**/packages/[m
[31m-[m
[31m-# Resharper files[m
[31m-_ReSharper*/[m
[31m-[m
[31m-# Files generated by JetBrains Rider[m
[31m-.idea/[m
[31m-[m
[31m-# Dotnet temporary files[m
[31m-*.dotCover[m
[31m-[m
[31m-# Others[m
[31m-*.vspscc[m
[31m-*.vssscc[m
[31m-[m
[31m-# Azure Pipelines[m
[31m-.vscode/tasks.json[m
[31m-.vscode/launch.json[m
[31m-.vscode/settings.json[m
[31m-[m
[31m-# IIS Express[m
[31m-/.vs/[m
[31m-[m
[31m-# User secrets[m
[31m-secrets.json[m
[31m-[m
[31m-# app settings[m
[31m-appsettings.json[m
[31m-[m
[31m-# others[m
[31m-/wwwroot/tmp/*[m
\ No newline at end of file[m
[1mdiff --git a/App.razor b/App.razor[m
[1mdeleted file mode 100644[m
[1mindex 623580d..0000000[m
[1m--- a/App.razor[m
[1m+++ /dev/null[m
[36m@@ -1,12 +0,0 @@[m
[31m-ï»¿<Router AppAssembly="@typeof(App).Assembly">[m
[31m-    <Found Context="routeData">[m
[31m-        <RouteView RouteData="@routeData" DefaultLayout="@typeof(MainLayout)" />[m
[31m-        <FocusOnNavigate RouteData="@routeData" Selector="h1" />[m
[31m-    </Found>[m
[31m-    <NotFound>[m
[31m-        <PageTitle>Not found</PageTitle>[m
[31m-        <LayoutView Layout="@typeof(MainLayout)">[m
[31m-            <p role="alert">Sorry, there's nothing at this address.</p>[m
[31m-        </LayoutView>[m
[31m-    </NotFound>[m
[31m-</Router>[m
[1mdiff --git a/Data/DatabaseContext.cs b/Data/DatabaseContext.cs[m
[1mdeleted file mode 100644[m
[1mindex 14936de..0000000[m
[1m--- a/Data/DatabaseContext.cs[m
[1m+++ /dev/null[m
[36m@@ -1,45 +0,0 @@[m
[31m-[m
[31m-using Microsoft.EntityFrameworkCore;[m
[31m-using Magazynek.Entities;[m
[31m-[m
[31m-[m
[31m-namespace Magazynek.Data[m
[31m-{[m
[31m-    public class DatabaseContext : DbContext[m
[31m-    {[m
[31m-        public required DbSet<ShippingEntry> ShippingEntries{ get; set; }[m
[31m-        public required DbSet<Product> Products { get; set; }[m
[31m-        public required DbSet<Project> Projects { get; set; }[m
[31m-        public required DbSet<ProjectRealization> ProjectRealizations { get; set; }[m
[31m-        public required DbSet<ProjectItem> ProjectItems { get; set; }[m
[31m-        public required DbSet<SystemSetting> SystemSettings { get; set; }[m
[31m-[m
[31m-        public DatabaseContext(DbContextOptions<DatabaseContext> options) : base(options) { }[m
[31m-        protected override void OnModelCreating(ModelBuilder modelBuilder)[m
[31m-        {[m
[31m-            modelBuilder.Entity<ShippingEntry>()[m
[31m-                .HasIndex(p => p.id)[m
[31m-                .IsUnique();[m
[31m-[m
[31m-            modelBuilder.Entity<Product>()[m
[31m-                .HasIndex(p => p.id)[m
[31m-                .IsUnique();[m
[31m-            modelBuilder.Entity<Project>()[m
[31m-                .HasIndex(p => p.id)[m
[31m-                .IsUnique();[m
[31m-            modelBuilder.Entity<ProjectItem>()[m
[31m-                .HasIndex(p => p.id)[m
[31m-                .IsUnique();[m
[31m-[m
[31m-            modelBuilder.Entity<ProjectRealization>()[m
[31m-                .HasIndex(p => p.id)[m
[31m-                .IsUnique();[m
[31m-[m
[31m-            modelBuilder.Entity<SystemSetting>()[m
[31m-                .HasIndex(s => s.name)[m
[31m-                .IsUnique();[m
[31m-                [m
[31m-            base.OnModelCreating(modelBuilder);[m
[31m-        }[m
[31m-    }[m
[31m-}[m
\ No newline at end of file[m
[1mdiff --git a/Data/StartupHelper.cs b/Data/StartupHelper.cs[m
[1mdeleted file mode 100644[m
[1mindex 1bcf01a..0000000[m
[1m--- a/Data/StartupHelper.cs[m
[1m+++ /dev/null[m
[36m@@ -1,25 +0,0 @@[m
[31m-using System;[m
[31m-using System.Collections.Generic;[m
[31m-using System.Linq;[m
[31m-using System.Threading.Tasks;[m
[31m-using Magazynek.Entities;[m
[31m-using Magazynek.Services;[m
[31m-[m
[31m-namespace Magazynek.Data[m
[31m-{[m
[31m-    [m
[31m-    public static class StartupHelper[m
[31m-    {[m
[31m-        public static async Task InitApplicationAsync(IServiceProvider services)[m
[31m-        {[m
[31m-            using var scope = services.CreateScope();[m
[31m-            var config = services.GetRequiredService<IConfiguration>();[m
[31m-[m
[31m-            // init system settings - create standard settings if not exist[m
[31m-            List<SettingDefinition> neededSettings = config.GetSection("NeddedSettings").Get<List<SettingDefinition>>() ?? new List<SettingDefinition>();[m
[31m-            ISystemSettingsService ssService = scope.ServiceProvider.GetRequiredService<ISystemSettingsService>();[m
[31m-            await ssService.CreateStandardSettingsIfNotExist(neededSettings);[m
[31m-[m
[31m-        }[m
[31m-    }[m
[31m-}[m
\ No newline at end of file[m
[1mdiff --git a/Data/StaticHelper.cs b/Data/StaticHelper.cs[m
[1mdeleted file mode 100644[m
[1mindex cec3494..0000000[m
[1m--- a/Data/StaticHelper.cs[m
[1m+++ /dev/null[m
[36m@@ -1,21 +0,0 @@[m
[31m-using System;[m
[31m-using System.Collections.Generic;[m
[31m-using System.ComponentModel;[m
[31m-using System.Linq;[m
[31m-using System.Reflection;[m
[31m-using System.Threading.Tasks;[m
[31m-using Magazynek.Entities;[m
[31m-[m
[31m-namespace Magazynek.Data[m
[31m-{[m
[31m-    public static class StaticHelper[m
[31m-    {[m
[31m-        public static DisplayInfoAttribute? GetDisplayInfo(this Enum value)[m
[31m-        {[m
[31m-            var field = value.GetType().GetField(value.ToString());[m
[31m-            return field?.GetCustomAttribute<DisplayInfoAttribute>();[m
[31m-        }[m
[31m-        public static string GetLabel(this Enum value) => value.GetDisplayInfo()?.Label ?? value.ToString();[m
[31m-        public static string GetAbbreviation(this Enum value) => value.GetDisplayInfo()?.Abbreviation ?? "";[m
[31m-    }[m
[31m-}[m
\ No newline at end of file[m
[1mdiff --git a/Data/TmeIntegrator.cs b/Data/TmeIntegrator.cs[m
[1mdeleted file mode 100644[m
[1mindex 47f746c..0000000[m
[1m--- a/Data/TmeIntegrator.cs[m
[1m+++ /dev/null[m
[36m@@ -1,131 +0,0 @@[m
[31m-using System;[m
[31m-using System.Collections.Generic;[m
[31m-using System.Linq;[m
[31m-using System.Threading.Tasks;[m
[31m-using Newtonsoft.Json;[m
[31m-[m
[31m-namespace Magazynek.Data[m
[31m-{[m
[31m-    public static class TmeIntegrator[m
[31m-    {[m
[31m-        public static async Task<ProductPricesResponse?> GetPricesAsync(string[] symbols, string token)[m
[31m-        {[m
[31m-            using var client = new HttpClient();[m
[31m-[m
[31m-            var config = new ConfigurationBuilder()[m
[31m-                .AddJsonFile("appsettings.json", optional: true)[m
[31m-                .Build();[m
[31m-[m
[31m-            client.DefaultRequestHeaders.Authorization = new System.Net.Http.Headers.AuthenticationHeaderValue("Bearer", token);[m
[31m-            var parameters = new List<KeyValuePair<string, string>>([m
[31m-            [[m
[31m-                new KeyValuePair<string, string>("Country", "PL"),[m
[31m-                new KeyValuePair<string, string>("Language", "pl"),[m
[31m-                new KeyValuePair<string, string>("Currency", "PLN"),[m
[31m-                new KeyValuePair<string, string>("GrossPrices", "false"),[m
[31m-            ]);[m
[31m-            for (int i = 0; i < symbols.Length; i++)[m
[31m-            {[m
[31m-                parameters.Add(new KeyValuePair<string, string>($"SymbolList[{i}]", symbols[i]));[m
[31m-            }[m
[31m-[m
[31m-            var content = new FormUrlEncodedContent(parameters);[m
[31m-            var response = await client.PostAsync("https://api.tme.eu/Products/GetPrices.json", content);[m
[31m-            if (!response.IsSuccessStatusCode) return null;[m
[31m-[m
[31m-            var json = await response.Content.ReadAsStringAsync();[m
[31m-            return JsonConvert.DeserializeObject<ProductPricesResponse>(json);[m
[31m-        }[m
[31m-        public static async Task<ProductStockResponse?> GetStocksAsync(IEnumerable<string> symbols, string token)[m
[31m-        {[m
[31m-            using var client = new HttpClient();[m
[31m-[m
[31m-            client.DefaultRequestHeaders.Authorization = new System.Net.Http.Headers.AuthenticationHeaderValue("Bearer", token);[m
[31m-[m
[31m-            var parameters = new List<KeyValuePair<string, string>>[m
[31m-            {[m
[31m-                new("Country", "PL"),[m
[31m-                new("Language", "pl")[m
[31m-            };[m
[31m-[m
[31m-            int index = 0;[m
[31m-            foreach (var symbol in symbols)[m
[31m-            {[m
[31m-                parameters.Add(new($"SymbolList[{index}]", symbol));[m
[31m-                index++;[m
[31m-            }[m
[31m-[m
[31m-            var content = new FormUrlEncodedContent(parameters);[m
[31m-[m
[31m-            var response = await client.PostAsync("https://api.tme.eu/Products/GetStocks.json", content);[m
[31m-[m
[31m-            if (!response.IsSuccessStatusCode) return null;[m
[31m-            [m
[31m-            var json = await response.Content.ReadAsStringAsync();[m
[31m-            return JsonConvert.DeserializeObject<ProductStockResponse>(json);[m
[31m-        }[m
[31m-    }[m
[31m-    public class ProductPricesResponse[m
[31m-    {[m
[31m-        public string Status { get; set; } = "";[m
[31m-        public Data Data { get; set; } = new();[m
[31m-    }[m
[31m-[m
[31m-    public class Data[m
[31m-    {[m
[31m-        public string Currency { get; set; } = "";[m
[31m-        public string Language { get; set; } = "";[m
[31m-        public string PriceType { get; set; } = "";[m
[31m-        public List<ProductItem> ProductList { get; set; } = new();[m
[31m-    }[m
[31m-[m
[31m-    public class ProductItem[m
[31m-    {[m
[31m-        public string Symbol { get; set; } = "";[m
[31m-        public string Unit { get; set; } = "";[m
[31m-        public int VatRate { get; set; }[m
[31m-        public string VatType { get; set; } = "";[m
[31m-        public int Amount { get; set; }[m
[31m-        public List<Price> PriceList { get; set; } = new();[m
[31m-    }[m
[31m-[m
[31m-    public class Price[m
[31m-    {[m
[31m-        public int Amount { get; set; }[m
[31m-        public decimal PriceValue { get; set; }[m
[31m-        public int PriceBase { get; set; }[m
[31m-        public bool Special { get; set; }[m
[31m-[m
[31m-        public override string ToString()[m
[31m-        {[m
[31m-            return $"{Amount} {PriceValue}";[m
[31m-        }[m
[31m-    }[m
[31m-[m
[31m-    public class ProductStockResponse[m
[31m-    {[m
[31m-        [JsonProperty("Status")][m
[31m-        public string Status { get; set; } = "";[m
[31m-[m
[31m-        [JsonProperty("Data")][m
[31m-        public StockData Data { get; set; } = new();[m
[31m-    }[m
[31m-[m
[31m-    public class StockData[m
[31m-    {[m
[31m-        [JsonProperty("ProductList")][m
[31m-        public List<StockProduct> ProductList { get; set; } = new();[m
[31m-    }[m
[31m-[m
[31m-    public class StockProduct[m
[31m-    {[m
[31m-        [JsonProperty("Symbol")][m
[31m-        public string Symbol { get; set; } = "";[m
[31m-[m
[31m-        [JsonProperty("Amount")][m
[31m-        public int Amount { get; set; }[m
[31m-[m
[31m-        [JsonProperty("Unit")][m
[31m-        public string Unit { get; set; } = "";[m
[31m-    }[m
[31m-}[m
\ No newline at end of file[m
[1mdiff --git a/Entities/Entry.cs b/Entities/Entry.cs[m
[1mdeleted file mode 100644[m
[1mindex a91a428..0000000[m
[1m--- a/Entities/Entry.cs[m
[1m+++ /dev/null[m
[36m@@ -1,69 +0,0 @@[m
[31m-using System.ComponentModel.DataAnnotations;[m
[31m-using System.ComponentModel.DataAnnotations.Schema;[m
[31m-[m
[31m-namespace Magazynek.Entities;[m
[31m-[m
[31m-[m
[31m-[Table("shipping_entry")][m
[31m-public class ShippingEntry[m
[31m-{[m
[31m-    [Required] public Guid id { get; private set; }[m
[31m-    [Required] public Guid item { get; private set; }[m
[31m-    [Required] public uint quantity { get; private set; }[m
[31m-    [Required] public DateTime last_check { get; private set; }[m
[31m-    [Required] public uint stock { get; private set; }[m
[31m-    [Required] public float price { get; private set; }[m
[31m-[m
[31m-    protected ShippingEntry() { }[m
[31m-    public ShippingEntry(Guid item, uint quantity, DateTime last_check, uint stock, float price)[m
[31m-    {[m
[31m-        this.id = Guid.NewGuid();[m
[31m-        this.item = item;[m
[31m-        this.quantity = quantity;[m
[31m-        this.last_check = last_check;[m
[31m-        this.stock = stock;[m
[31m-        this.price = price;[m
[31m-    }[m
[31m-    protected ShippingEntry(ShippingEntryViewModel model)[m
[31m-    {[m
[31m-        this.id = model.id;[m
[31m-        this.item = model.product.id!;[m
[31m-        this.quantity = (uint)model.quantity;[m
[31m-        this.last_check = model.last_check;[m
[31m-        this.stock = (uint)model.stock;[m
[31m-        this.price = model.price;[m
[31m-    }[m
[31m-[m
[31m-    public void SetItem(Guid item) => this.item = item;[m
[31m-    public void SetQuantity(uint quantity) => this.quantity = quantity;[m
[31m-    public void SetLastCheck(DateTime last_check) => this.last_check = last_check;[m
[31m-    public void SetStock(uint stock) => this.stock = stock;[m
[31m-    public void SetPrice(float price) => this.price = price;[m
[31m-}[m
[31m-[m
[31m-public class ShippingEntryViewModel[m
[31m-{[m
[31m-    public Guid id { get; set; }[m
[31m-    public Product product { get; set; }[m
[31m-    public int quantity { get; set; }[m
[31m-    public DateTime last_check { get; set; }[m
[31m-    public uint stock { get; set; }[m
[31m-    public float price { get; set; }[m
[31m-    public float stockValue => quantity * price;[m
[31m-[m
[31m-    public ShippingEntryViewModel(ShippingEntry ShippingEntry, Product product)[m
[31m-    {[m
[31m-        this.id = ShippingEntry.id;[m
[31m-        this.product = product;[m
[31m-        this.quantity = (int)ShippingEntry.quantity;[m
[31m-        this.last_check = ShippingEntry.last_check;[m
[31m-        this.stock = ShippingEntry.stock;[m
[31m-        this.price = ShippingEntry.price;[m
[31m-    }[m
[31m-    [m
[31m-    public static ShippingEntryViewModel Empty() =>[m
[31m-        new ShippingEntryViewModel([m
[31m-            new ShippingEntry(Guid.Empty, 0, DateTime.MinValue, 0, 0),[m
[31m-            Product.Temporary()[m
[31m-        );[m
[31m-}[m
\ No newline at end of file[m
[1mdiff --git a/Entities/Product.cs b/Entities/Product.cs[m
[1mdeleted file mode 100644[m
[1mindex 5d72274..0000000[m
[1m--- a/Entities/Product.cs[m
[1m+++ /dev/null[m
[36m@@ -1,125 +0,0 @@[m
[31m-using System.ComponentModel;[m
[31m-using System.ComponentModel.DataAnnotations;[m
[31m-using System.ComponentModel.DataAnnotations.Schema;[m
[31m-[m
[31m-namespace Magazynek.Entities;[m
[31m-[m
[31m-[AttributeUsage(AttributeTargets.Field, AllowMultiple = false)][m
[31m-public class DisplayInfoAttribute : Attribute[m
[31m-{[m
[31m-    public string Label { get; }[m
[31m-    public string Abbreviation { get; }[m
[31m-[m
[31m-    public DisplayInfoAttribute(string label, string abbreviation)[m
[31m-    {[m
[31m-        Label = label;[m
[31m-        Abbreviation = abbreviation;[m
[31m-    }[m
[31m-}[m
[31m-[m
[31m-[Table("product")][m
[31m-public class Product[m
[31m-{[m
[31m-    public enum Type[m
[31m-    {[m
[31m-        [DisplayInfo("Element", "")] Item,[m
[31m-        [DisplayInfo("Surowiec", "")] RawMaterial[m
[31m-    }[m
[31m-    public enum Unit[m
[31m-    {[m
[31m-        [DisplayInfo("Metr bieÅ¼Ä…cy", "mb")] Meter,[m
[31m-        [DisplayInfo("Kilogram", "kg")] Kilogram,[m
[31m-        [DisplayInfo("Litr", "L")] Liter[m
[31m-    }[m
[31m-    [Key] public Guid id { get; protected set; }[m
[31m-    [Required] public string name { get; private set; }[m
[31m-    [Required] public string package { get; private set; }[m
[31m-    [Required] public string description { get; private set; }[m
[31m-    [Required] public bool active { get; private set; }[m
[31m-    [Column("farnellid")][Required] public string farnellID { get; private set; }[m
[31m-    [Column("tmeid")][Required] public string tmeID { get; private set; }[m
[31m-    [Required] public Type type { get; set; }[m
[31m-    [Required] public Unit unit { get; set; }[m
[31m-[m
[31m-    public Product(string name, string package, string farnellID, string tmeID, string description, bool active, Type type, Unit unit)[m
[31m-    {[m
[31m-        this.id = Guid.NewGuid();[m
[31m-        this.name = name;[m
[31m-        this.package = package;[m
[31m-        this.farnellID = farnellID;[m
[31m-        this.tmeID = tmeID;[m
[31m-        this.description = description;[m
[31m-        this.active = active;[m
[31m-        this.type = type;[m
[31m-        this.unit = unit;[m
[31m-    }[m
[31m-    protected Product(ProductViewModel model)[m
[31m-    {[m
[31m-        this.id = model.id;[m
[31m-        this.name = model.name;[m
[31m-        this.package = model.package;[m
[31m-        this.farnellID = model.farnellID;[m
[31m-        this.tmeID = model.tmeID;[m
[31m-        this.description = model.description;[m
[31m-        this.active = model.active;[m
[31m-        this.type = model.type;[m
[31m-        this.unit = model.unit;[m
[31m-    }[m
[31m-[m
[31m-    protected Product()[m
[31m-    {[m
[31m-        this.id = Guid.Empty;[m
[31m-        this.name = "";[m
[31m-        this.package = "";[m
[31m-        this.farnellID = "";[m
[31m-        this.tmeID = "";[m
[31m-        this.description = "";[m
[31m-        this.active = true;[m
[31m-        this.type = Type.Item;[m
[31m-        this.unit = Unit.Meter;[m
[31m-    }[m
[31m-    public static Product Temporary()[m
[31m-    {[m
[31m-        return new Product();[m
[31m-    }[m
[31m-[m
[31m-    public void SetName(string name) => this.name = name;[m
[31m-    public void SetPackage(string package) => this.package = package;[m
[31m-    public void SetFarnellID(string farnellID) => this.farnellID = farnellID;[m
[31m-    public void SetTmeID(string tmeID) => this.tmeID = tmeID;[m
[31m-    public void SetDescription(string description) => this.description = description;[m
[31m-    public void SetActive(bool active) => this.active = active;[m
[31m-    public void SetType(Type type) => this.type = type;[m
[31m-    public void SetUnit(Unit unit) => this.unit = unit;[m
[31m-[m
[31m-    public override string ToString() => $"PRODUCT: {name}: {description} ({package})";[m
[31m-[m
[31m-    public static void AddToList(List<Product> list, ProductViewModel viewModel) => list.Add(new Product(viewModel));[m
[31m-}[m
[31m-[m
[31m-[m
[31m-public class ProductViewModel[m
[31m-{[m
[31m-    public Guid id { get; private set; }[m
[31m-    public string name { get; set; } = "";[m
[31m-    public string description { get; set; } = "";[m
[31m-    public string package { get; set; } = "";[m
[31m-    public string farnellID { get; set; } = "";[m
[31m-    public string tmeID { get; set; } = "";[m
[31m-    public bool active { get; set; }[m
[31m-    public Product.Type type { get; set; }[m
[31m-    public Product.Unit unit { get; set; }[m
[31m-[m
[31m-    public ProductViewModel(Product product)[m
[31m-    {[m
[31m-        this.id = product.id;[m
[31m-        this.name = product.name;[m
[31m-        this.package = product.package;[m
[31m-        this.farnellID = product.farnellID;[m
[31m-        this.tmeID = product.tmeID;[m
[31m-        this.description = product.description;[m
[31m-        this.active = product.active;[m
[31m-        this.type = product.type;[m
[31m-        this.unit = product.unit;[m
[31m-    }[m
[31m-}[m
[1mdiff --git a/Entities/Project.cs b/Entities/Project.cs[m
[1mdeleted file mode 100644[m
[1mindex f056a84..0000000[m
[1m--- a/Entities/Project.cs[m
[1m+++ /dev/null[m
[36m@@ -1,144 +0,0 @@[m
[31m-using System.ComponentModel.DataAnnotations;[m
[31m-using System.ComponentModel.DataAnnotations.Schema;[m
[31m-[m
[31m-namespace Magazynek.Entities;[m
[31m-[m
[31m-[Table("project_item")][m
[31m-public class ProjectItem[m
[31m-{[m
[31m-    [Key] public Guid id { get; private set; }[m
[31m-[m
[31m-    [Column("itemid")] [Required] public Guid itemID { get; set; }[m
[31m-[m
[31m-    [Required] public int quantity { get; set; }[m
[31m-[m
[31m-    [Column("projectid")] [Required] public Guid projectID { get; private set; }[m
[31m-    [m
[31m-    [NotMapped] public Product? product { get; set; } = null;[m
[31m-[m
[31m-    public enum ErrorState[m
[31m-    {[m
[31m-        OK = 0,[m
[31m-        NotEnoughBought = 1,[m
[31m-        NotInStockAtAll = 2[m
[31m-    }[m
[31m-    public static ErrorState GetErrorState(ShippingEntryViewModel? shippingModel, int neededQty)[m
[31m-    {[m
[31m-        if (shippingModel == null) return ErrorState.NotInStockAtAll;[m
[31m-[m
[31m-        if (shippingModel.stock == 0 && shippingModel.quantity < neededQty) return ErrorState.NotInStockAtAll;[m
[31m-        if (shippingModel.quantity < neededQty) return ErrorState.NotEnoughBought;[m
[31m-        return ErrorState.OK;[m
[31m-    }[m
[31m-[m
[31m-[m
[31m-    protected ProjectItem()[m
[31m-    {[m
[31m-        this.id = Guid.Empty;[m
[31m-        this.itemID = Guid.Empty;[m
[31m-        this.quantity = 0;[m
[31m-        this.projectID = Guid.Empty;[m
[31m-    }[m
[31m-    public ProjectItem(Product? product, int quantity, Project project)[m
[31m-    {[m
[31m-        this.id = Guid.NewGuid();[m
[31m-        if (product == null) this.itemID = Guid.Empty;[m
[31m-        else this.itemID = product.id;[m
[31m-        this.quantity = quantity;[m
[31m-        projectID = project.id;[m
[31m-        this.product = product;[m
[31m-    }[m
[31m-    public int GetAvailableQuantity(List<ShippingEntryViewModel> shippingEntryViewModels)[m
[31m-    {[m
[31m-        // get revelant shipping entries[m
[31m-        int relevantEntriesCount = 0;[m
[31m-        if (product != null)[m
[31m-        {[m
[31m-            ShippingEntryViewModel? model = shippingEntryViewModels.FirstOrDefault(e => e.product.id == product.id);[m
[31m-            if (model != null) relevantEntriesCount = model.quantity;[m
[31m-        }[m
[31m-        return relevantEntriesCount;[m
[31m-    }[m
[31m-    public override string ToString()[m
[31m-    {[m
[31m-        return $"ProjectItem: {itemID} (Quantity: {quantity}) in Project: {projectID}";[m
[31m-    }[m
[31m-}[m
[31m-[m
[31m-[Table("project")][m
[31m-public class Project[m
[31m-{[m
[31m-    [Required] public Guid id { get; private set; }[m
[31m-    [Required] public string name { get; set; } = string.Empty;[m
[31m-[m
[31m-    [NotMapped] public List<ProjectItem> items { get; private set; } = new List<ProjectItem>();[m
[31m-[m
[31m-    protected Project() { }[m
[31m-    public Project(string name)[m
[31m-    {[m
[31m-        this.id = Guid.NewGuid();[m
[31m-        this.items = new List<ProjectItem>();[m
[31m-        this.name = name;[m
[31m-    }[m
[31m-    public Project(Project model, List<ProjectItem>? items = null)[m
[31m-    {[m
[31m-        this.id = model.id;[m
[31m-        this.name = model.name;[m
[31m-        if (items == null) this.items = new(model.items);[m
[31m-        else this.items = new(items);[m
[31m-    }[m
[31m-    public void AddItem(Product? product, int quantity) => this.items.Add(new ProjectItem(product, quantity, this));[m
[31m-    public void Removeitem(ProjectItem item) => this.items.Remove(item);[m
[31m-    public void SetItems(List<ProjectItem> items) => this.items = items;[m
[31m-[m
[31m-    public int GetBoughtItemsPercentReadiness(List<ShippingEntryViewModel> shippingEntryViewModels)[m
[31m-    {[m
[31m-        int count = 0;[m
[31m-        foreach (var item in items)[m
[31m-        {[m
[31m-            if(item.GetAvailableQuantity(shippingEntryViewModels) >= item.quantity) count += 1;[m
[31m-        }[m
[31m-[m
[31m-        return count * 100 / items.Count;[m
[31m-    }[m
[31m-    public float GetTotalValue(List<ShippingEntryViewModel> shippingEntryViewModels)[m
[31m-    {[m
[31m-        float total = 0;[m
[31m-        foreach (var item in items)[m
[31m-        {[m
[31m-            ShippingEntryViewModel? model = shippingEntryViewModels.FirstOrDefault(e => e.product.id == item.product?.id);[m
[31m-            if (model != null) total += model.price * item.quantity;[m
[31m-        }[m
[31m-        return total;[m
[31m-    }[m
[31m-    public float GetMissingValue(List<ShippingEntryViewModel> shippingEntryViewModels)[m
[31m-    {[m
[31m-        float total = 0;[m
[31m-        foreach (var item in items)[m
[31m-        {[m
[31m-            int availableQty = item.GetAvailableQuantity(shippingEntryViewModels);[m
[31m-            if (availableQty >= item.quantity) continue;[m
[31m-[m
[31m-            int neededQtyToBuy = item.quantity - availableQty;[m
[31m-            if(neededQtyToBuy < 1) neededQtyToBuy = 1;[m
[31m-[m
[31m-            ShippingEntryViewModel? model = shippingEntryViewModels.FirstOrDefault(e => e.product.id == item.product?.id);[m
[31m-            if (model != null) total += model.price * neededQtyToBuy;[m
[31m-        }[m
[31m-        return total;[m
[31m-    }[m
[31m-[m
[31m-    public override string ToString()[m
[31m-    {[m
[31m-        return $"Project: {name} (ID: {id})";[m
[31m-    }[m
[31m-[m
[31m-    public void PrintMe()[m
[31m-    {[m
[31m-        Console.WriteLine(this.ToString());[m
[31m-        foreach (var item in items)[m
[31m-        {[m
[31m-            Console.WriteLine($"  - {item}");[m
[31m-        }[m
[31m-    }[m
[31m-}[m
\ No newline at end of file[m
[1mdiff --git a/Entities/ProjectRealization.cs b/Entities/ProjectRealization.cs[m
[1mdeleted file mode 100644[m
[1mindex 98911ae..0000000[m
[1m--- a/Entities/ProjectRealization.cs[m
[1m+++ /dev/null[m
[36m@@ -1,70 +0,0 @@[m
[31m-using System.ComponentModel.DataAnnotations;[m
[31m-using System.ComponentModel.DataAnnotations.Schema;[m
[31m-[m
[31m-[m
[31m-namespace Magazynek.Entities[m
[31m-{[m
[31m-    [Table("project_realization")][m
[31m-    public class ProjectRealization[m
[31m-    {[m
[31m-        [Key] public Guid id { get; private set; }[m
[31m-        [Column("project_id")] public Guid projectID { get; private set; }[m
[31m-        [Column("name") ] public string name { get; private set; } = string.Empty;[m
[31m-        [Column("start_date")] public DateTime startDate { get; private set; }[m
[31m-        [Column("end_date")] public DateTime? endDate { get; private set; }[m
[31m-        [Column("quantity")] public int quantity { get; private set; }[m
[31m-        [Column("notes")] public string? notes { get; private set; }[m
[31m-[m
[31m-[m
[31m-        private ProjectRealization() { }[m
[31m-[m
[31m-        public ProjectRealization(ProjectRealizationViewModel model) [m
[31m-        {[m
[31m-            id = model.id;[m
[31m-            if(model.project != null) projectID = model.project.id;[m
[31m-            name = model.name;[m
[31m-            startDate = model.startDate;[m
[31m-            endDate = model.endDate;[m
[31m-            quantity = model.quantity;[m
[31m-            notes = model.notes;[m
[31m-        }[m
[31m-    }[m
[31m-[m
[31m-    public class ProjectRealizationViewModel [m
[31m-    {[m
[31m-        public Guid id { get; set; }[m
[31m-        public string name { get; set; }[m
[31m-        public Project? project { get; set; }[m
[31m-        public Guid projectID { get; set; }[m
[31m-        public List<ProjectItem> items { get; set; }[m
[31m-        public DateTime startDate { get; set; }[m
[31m-        public DateTime? endDate { get; set; }[m
[31m-        public int quantity { get; set; } = 1;[m
[31m-        public string? notes { get; set; }[m
[31m-[m
[31m-        public ProjectRealizationViewModel(string name)[m
[31m-        {[m
[31m-            this.id = Guid.NewGuid();[m
[31m-            this.name = name;[m
[31m-            this.project = new Project("");[m
[31m-            this.projectID = Guid.Empty;[m
[31m-            this.items = new List<ProjectItem>();[m
[31m-            this.startDate = DateTime.Now;[m
[31m-            this.endDate = null;[m
[31m-            this.quantity = 0;[m
[31m-            this.notes = null;[m
[31m-        }[m
[31m-        public ProjectRealizationViewModel(ProjectRealization realization, Project project, List<ProjectItem> items)[m
[31m-        {[m
[31m-            this.id = realization.id;[m
[31m-            this.project = project;[m
[31m-            this.projectID = project.id;[m
[31m-            this.name = realization.name;[m
[31m-            this.items = items;[m
[31m-            this.startDate = realization.startDate;[m
[31m-            this.endDate = realization.endDate;[m
[31m-            this.quantity = realization.quantity;[m
[31m-            this.notes = realization.notes;[m
[31m-        }[m
[31m-    }[m
[31m-}[m
\ No newline at end of file[m
[1mdiff --git a/Entities/SystemSettings.cs b/Entities/SystemSettings.cs[m
[1mdeleted file mode 100644[m
[1mindex 41f06fb..0000000[m
[1m--- a/Entities/SystemSettings.cs[m
[1m+++ /dev/null[m
[36m@@ -1,64 +0,0 @@[m
[31m-using System.ComponentModel.DataAnnotations;[m
[31m-using System.ComponentModel.DataAnnotations.Schema;[m
[31m-[m
[31m-[m
[31m-namespace Magazynek.Entities[m
[31m-{[m
[31m-    public sealed class SettingDefinition[m
[31m-    {[m
[31m-        public string Name { get; set; } = string.Empty;[m
[31m-        public SystemSetting.SettingType Type { get; set; } = SystemSetting.SettingType.STRING;[m
[31m-    }[m
[31m-[m
[31m-    [Table("systemsettings")][m
[31m-    public class SystemSetting[m
[31m-    {[m
[31m-        public enum SettingType[m
[31m-        {[m
[31m-            STRING,[m
[31m-            INT,[m
[31m-            BOOL,[m
[31m-            FLOAT[m
[31m-        }[m
[31m-        [Key] public string name { get; set; } = string.Empty;[m
[31m-        [Required] public SettingType type { get; set; } = SettingType.STRING;[m
[31m-        [Required] public string value { get; set; } = string.Empty;[m
[31m-[m
[31m-[m
[31m-        [NotMapped][m
[31m-        public bool b_value[m
[31m-        {[m
[31m-            get => value == "true";[m
[31m-            set => this.value = value.ToString().ToLower();[m
[31m-        }[m
[31m-        [NotMapped][m
[31m-        public int i_value[m
[31m-        {[m
[31m-            get => int.TryParse(value, out int res) ? res : 0;[m
[31m-            set => this.value = value.ToString();[m
[31m-        }[m
[31m-        [NotMapped][m
[31m-        public float f_value[m
[31m-        {[m
[31m-            get => float.TryParse(value, out float res) ? res : 0;[m
[31m-            set => this.value = value.ToString();[m
[31m-        }[m
[31m-[m
[31m-        protected SystemSetting() { }[m
[31m-[m
[31m-        public SystemSetting(string name, SettingType type, string value)[m
[31m-        {[m
[31m-            this.name = name;[m
[31m-            this.type = type;[m
[31m-            this.value = value;[m
[31m-        }[m
[31m-    }[m
[31m-[m
[31m-    public static class SystemSettingHelper[m
[31m-    {[m
[31m-        public static SystemSetting? GetSettingByName(this List<SystemSetting> list, string name)[m
[31m-        {[m
[31m-            return list.FirstOrDefault(s => s.name == name);[m
[31m-        }[m
[31m-    }   [m
[31m-}[m
\ No newline at end of file[m
[1mdiff --git a/Magazynek.csproj b/Magazynek.csproj[m
[1mdeleted file mode 100644[m
[1mindex 3174e7c..0000000[m
[1m--- a/Magazynek.csproj[m
[1m+++ /dev/null[m
[36m@@ -1,13 +0,0 @@[m
[31m-<Project Sdk="Microsoft.NET.Sdk.Web">[m
[31m-  <PropertyGroup>[m
[31m-    <TargetFramework>net8.0</TargetFramework>[m
[31m-    <Nullable>enable</Nullable>[m
[31m-    <ImplicitUsings>enable</ImplicitUsings>[m
[31m-    <LangVersion>12.0</LangVersion>[m
[31m-  </PropertyGroup>[m
[31m-  <ItemGroup>[m
[31m-    <PackageReference Include="Npgsql.EntityFrameworkCore.PostgreSQL" Version="8.0.11" />[m
[31m-    <PackageReference Include="Z.EntityFramework.Extensions.EFCore" Version="8.103.8.1" />[m
[31m-    <PackageReference Include="Newtonsoft.Json" Version="13.0.3" />[m
[31m-  </ItemGroup>[m
[31m-</Project>[m
\ No newline at end of file[m
[1mdiff --git a/Pages/DoProject.razor b/Pages/DoProject.razor[m
[1mdeleted file mode 100644[m
[1mindex 5548556..0000000[m
[1m--- a/Pages/DoProject.razor[m
[1m+++ /dev/null[m
[36m@@ -1,101 +0,0 @@[m
[31m-@page "/do-project"[m
[31m-[m
[31m-@using Magazynek.Entities[m
[31m-@using Magazynek.Services[m
[31m-[m
[31m-@inject IProductService ProductService[m
[31m-@inject IProjectService ProjectService[m
[31m-@inject IProjectReservationService ProjectReservationService[m
[31m-[m
[31m-[m
[31m-[m
[31m-<PageTitle>Realizuj</PageTitle>[m
[31m-[m
[31m-<div class="container mt-4">[m
[31m-    <button class="btn btn-success" @onclick="AddNew">[m
[31m-        <i class="bi bi-plus-circle"></i>[m
[31m-    </button>[m
[31m-[m
[31m-    @if(editingObject != null)[m
[31m-    {[m
[31m-        <div class="modal show d-block" tabindex="-1" style="background-color: rgba(0,0,0,0.5);">[m
[31m-            <div class="modal-dialog">[m
[31m-                <div class="modal-content text-light bg-dark">[m
[31m-                    <div class="modal-header">[m
[31m-                        <h5 class="modal-title">[m
[31m-                            @(editingIsNew ? "Dodaj projekt" : "Modyfikuj projekt")[m
[31m-                        </h5>[m
[31m-                        <button type="button" class="btn-close btn-close-white" @onclick="CloseEditModal"></button>[m
[31m-                    </div>[m
[31m-                    <div class="modal-body">[m
[31m-                        <EditForm Model="editingObject" OnValidSubmit="Save" >[m
[31m-                            <div class="mb-3">[m
[31m-                                <label class="form-label">Nazwa</label>[m
[31m-                                <InputText class="form-control" @bind-Value="editingObject.name" />[m
[31m-                            </div>[m
[31m-                            <div class="mb-3">[m
[31m-                                <label class="form-label">Projekt</label>[m
[31m-                                <InputSelect class="form-select" @bind-Value="editingObject.projectID">[m
[31m-                                    <option value="@Guid.Empty" selected>Wybierz</option>[m
[31m-                                    @foreach (Project project in projects)[m
[31m-                                    {[m
[31m-                                        <option value="@project.id">@project.name</option>[m
[31m-                                    }[m
[31m-                                </InputSelect>[m
[31m-                            </div>[m
[31m-                            <div class="mb-3">[m
[31m-                                <label class="form-label">IloÅ›Ä‡</label>[m
[31m-                                <InputNumber class="form-control" min="1" @bind-Value="editingObject.quantity" />[m
[31m-                            </div>[m
[31m-                        </EditForm>[m
[31m-                    </div>[m
[31m-                </div>[m
[31m-            </div>[m
[31m-        </div>[m
[31m-    }[m
[31m-[m
[31m-    <table class="table table-dark table-striped table-hover align-middle">[m
[31m-        <thead class="table-dark border-bottom border-light">[m
[31m-            <tr>[m
[31m-                <th>Nazwa</th>[m
[31m-                <th class="button-th">Akcje</th>[m
[31m-            </tr>[m
[31m-        </thead>[m
[31m-        <tbody>[m
[31m-            @foreach(ProjectRealizationViewModel model in realizations)[m
[31m-            {[m
[31m-                <tr>[m
[31m-                </tr>[m
[31m-            }[m
[31m-        </tbody>[m
[31m-    </table>[m
[31m-</div>[m
[31m-[m
[31m-[m
[31m-[m
[31m-@code {[m
[31m-    List<ProjectRealizationViewModel> realizations = new();[m
[31m-    List<Project> projects = new();[m
[31m-[m
[31m-    private ProjectRealizationViewModel? editingObject = null;[m
[31m-    private bool editingIsNew = false;[m
[31m-[m
[31m-[m
[31m-    protected override async Task OnParametersSetAsync() {[m
[31m-        realizations = await ProjectReservationService.Get();[m
[31m-        projects = await ProjectService.Get();[m
[31m-    }[m
[31m-    private void AddNew() {[m
[31m-        editingIsNew = true;[m
[31m-        editingObject = new ProjectRealizationViewModel("");[m
[31m-    }[m
[31m-    private void CloseEditModal() {[m
[31m-        editingObject = null;[m
[31m-    }[m
[31m-    private async void Save(EditContext context)[m
[31m-    {[m
[31m-        if(editingObject == null) return;[m
[31m-        await Task.Delay(0); // This line is just to avoid warning about async method without await[m
[31m-        [m
[31m-    }[m
[31m-}[m
\ No newline at end of file[m
[1mdiff --git a/Pages/Error.cshtml b/Pages/Error.cshtml[m
[1mdeleted file mode 100644[m
[1mindex a9cd8da..0000000[m
[1m--- a/Pages/Error.cshtml[m
[1m+++ /dev/null[m
[36m@@ -1,42 +0,0 @@[m
[31m-ï»¿@page[m
[31m-@model Magazynek.Pages.ErrorModel[m
[31m-[m
[31m-<!DOCTYPE html>[m
[31m-<html lang="en">[m
[31m-[m
[31m-<head>[m
[31m-    <meta charset="utf-8" />[m
[31m-    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />[m
[31m-    <title>Error</title>[m
[31m-    <link href="~/css/bootstrap/bootstrap.min.css" rel="stylesheet" />[m
[31m-    <link href="~/css/site.css" rel="stylesheet" asp-append-version="true" />[m
[31m-</head>[m
[31m-[m
[31m-<body>[m
[31m-    <div class="main">[m
[31m-        <div class="content px-4">[m
[31m-            <h1 class="text-danger">Error.</h1>[m
[31m-            <h2 class="text-danger">An error occurred while processing your request.</h2>[m
[31m-[m
[31m-            @if (Model.ShowRequestId)[m
[31m-            {[m
[31m-                <p>[m
[31m-                    <strong>Request ID:</strong> <code>@Model.RequestId</code>[m
[31m-                </p>[m
[31m-            }[m
[31m-[m
[31m-            <h3>Development Mode</h3>[m
[31m-            <p>[m
[31m-                Swapping to the <strong>Development</strong> environment displays detailed information about the error that occurred.[m
[31m-            </p>[m
[31m-            <p>[m
[31m-                <strong>The Development environment shouldn't be enabled for deployed applications.</strong>[m
[31m-                It can result in displaying sensitive information from exceptions to end users.[m
[31m-                For local debugging, enable the <strong>Development</strong> environment by setting the <strong>ASPNETCORE_ENVIRONMENT</strong> environment variable to <strong>Development</strong>[m
[31m-                and restarting the app.[m
[31m-            </p>[m
[31m-        </div>[m
[31m-    </div>[m
[31m-</body>[m
[31m-[m
[31m-</html>[m
[1mdiff --git a/Pages/Error.cshtml.cs b/Pages/Error.cshtml.cs[m
[1mdeleted file mode 100644[m
[1mindex 8711056..0000000[m
[1m--- a/Pages/Error.cshtml.cs[m
[1m+++ /dev/null[m
[36m@@ -1,26 +0,0 @@[m
[31m-ï»¿using System.Diagnostics;[m
[31m-using Microsoft.AspNetCore.Mvc;[m
[31m-using Microsoft.AspNetCore.Mvc.RazorPages;[m
[31m-[m
[31m-namespace Magazynek.Pages;[m
[31m-[m
[31m-[ResponseCache(Duration = 0, Location = ResponseCacheLocation.None, NoStore = true)][m
[31m-[IgnoreAntiforgeryToken][m
[31m-public class ErrorModel : PageModel[m
[31m-{[m
[31m-    public string? RequestId { get; set; }[m
[31m-[m
[31m-    public bool ShowRequestId => !string.IsNullOrEmpty(RequestId);[m
[31m-[m
[31m-    private readonly ILogger<ErrorModel> _logger;[m
[31m-[m
[31m-    public ErrorModel(ILogger<ErrorModel> logger)[m
[31m-    {[m
[31m-        _logger = logger;[m
[31m-    }[m
[31m-[m
[31m-    public void OnGet()[m
[31m-    {[m
[31m-        RequestId = Activity.Current?.Id ?? HttpContext.TraceIdentifier;[m
[31m-    }[m
[31m-}[m
[1mdiff --git a/Pages/Index.razor b/Pages/Index.razor[m
[1mdeleted file mode 100644[m
[1mindex d17a4b7..0000000[m
[1m--- a/Pages/Index.razor[m
[1m+++ /dev/null[m
[36m@@ -1,245 +0,0 @@[m
[31m-ï»¿@page "/"[m
[31m-@using Magazynek.Entities[m
[31m-@using Magazynek.Services[m
[31m-@using Magazynek.Data[m
[31m-[m
[31m-@inject IShippingEntryService ShippingEntryService[m
[31m-@inject IProductService       ProductService[m
[31m-@inject ISystemSettingsService SystemSettingsService[m
[31m-[m
[31m-[m
[31m-<PageTitle>IloÅ›ci</PageTitle>[m
[31m-[m
[31m-<div class="container mt-4">[m
[31m-    <div class="mb-3 searcher gap-4">[m
[31m-        <input class="form-control bg-dark text-light" type="text" placeholder="Szukaj..." @bind="searchTerm" />[m
[31m-        <button class="btn btn-success" @onclick="AddNew">[m
[31m-            <i class="bi bi-plus-circle"></i>[m
[31m-        </button>[m
[31m-        @if(tmeEnabled)[m
[31m-        {[m
[31m-            <button class="btn btn-light" @onclick="RefreshValues">[m
[31m-                <i class="bi bi-arrow-clockwise"></i>[m
[31m-            </button>[m
[31m-        }[m
[31m-    </div>[m
[31m-    <table class="table table-dark table-striped table-hover align-middle">[m
[31m-        <thead class="table-dark border-bottom border-light">[m
[31m-            <tr>[m
[31m-                <th>Nazwa</th>[m
[31m-                <th>Opis</th>[m
[31m-                <th>Obudowa</th>[m
[31m-                <th>IloÅ›Ä‡</th>[m
[31m-                <th>TME ID</th>[m
[31m-                <th>DostÄ™pnoÅ›Ä‡</th>[m
[31m-            </tr>[m
[31m-        </thead>[m
[31m-        <tbody>[m
[31m-            @foreach (ShippingEntryViewModel shippingEntry in filteredShippings)[m
[31m-            {[m
[31m-                bool qtyZero = shippingEntry.quantity == 0;[m
[31m-                bool stockZero = shippingEntry.stock == 0;[m
[31m-                string extraUnit = "";[m
[31m-                if(shippingEntry.product.type == Product.Type.RawMaterial) extraUnit = $"({shippingEntry.product.unit.GetAbbreviation()}) ";[m
[31m-                <tr>[m
[31m-                    <td class="@(stockZero || qtyZero? "text-danger":"")">@shippingEntry.product.name @extraUnit</td>[m
[31m-                    <td>@shippingEntry.product.description</td>[m
[31m-                    <td>@shippingEntry.product.package</td>[m
[31m-                    <td class="@(qtyZero? "text-danger":"")">@shippingEntry.quantity</td>[m
[31m-                    <td>@shippingEntry.product.tmeID</td>[m
[31m-                    <td class="@(stockZero? "text-danger":"")">@shippingEntry.stock</td>[m
[31m-                </tr>[m
[31m-            }[m
[31m-        </tbody>[m
[31m-    </table>[m
[31m-[m
[31m-    @if (editingEntry != null)[m
[31m-    {[m
[31m-        <div class="modal show d-block" tabindex="-1" style="background-color: rgba(0,0,0,0.5);">[m
[31m-            <div class="modal-dialog">[m
[31m-                <div class="modal-content text-light bg-dark">[m
[31m-                    <div class="modal-header">[m
[31m-                        <h5 class="modal-title">Dodaj dostawÄ™</h5>[m
[31m-                        <button type="button" class="btn-close btn-close-white" @onclick="CloseAddModal"></button>[m
[31m-                    </div>[m
[31m-                    <div class="modal-body">[m
[31m-                        <EditForm Model="editingEntry" OnValidSubmit="SaveEntry">[m
[31m-                            <div class="mb-3">[m
[31m-                                <label for="search-product" class="form-label">Wybierz produkt</label>[m
[31m-                                <InputText id="search-product" class="form-control mb-2" placeholder="Szukaj..." [m
[31m-                                    @bind-Value="productSearch" [m
[31m-                                    @oninput="e => { productSearch = e.Value?.ToString() ?? string.Empty; FilterProducts(); }" [m
[31m-                                />[m
[31m-                                <select id="sel-product" class="form-select" @onchange="OnProductSelected">[m
[31m-                                    @foreach (Product product in filteredProducts)[m
[31m-                                    {[m
[31m-                                        <option value="@product.id">@product.name</option>[m
[31m-                                    }[m
[31m-                                </select>[m
[31m-                            </div>[m
[31m-                            <div class="mb-3">[m
[31m-                                <label for="qty" class="form-label">IloÅ›Ä‡</label>[m
[31m-                                <div class="input-group">[m
[31m-                                    @if(editingEntry.product.type == Product.Type.RawMaterial)[m
[31m-                                    {[m
[31m-                                        <InputNumber id="qty" class="form-control" @bind-Value="editingEntry.quantity" min="0" step="0.01" area-describedby="addon-unit"/>[m
[31m-                                        <span class="input-group-text" id="addon-unit">@editingEntry.product.unit.GetAbbreviation()</span>[m
[31m-                                    }[m
[31m-                                    else[m
[31m-                                    {[m
[31m-                                        <InputNumber id="qty" class="form-control" @bind-Value="editingEntry.quantity" min="0" step="1"/>[m
[31m-                                    }[m
[31m-                                </div>[m
[31m-                            </div>[m
[31m-                            <button type="submit" class="btn btn-success">Save</button>[m
[31m-                        </EditForm>[m
[31m-                    </div>[m
[31m-                </div>[m
[31m-            </div>[m
[31m-        </div>[m
[31m-    }[m
[31m-[m
[31m-    @if (isLoading)[m
[31m-    {[m
[31m-         <div class="modal show d-block" tabindex="-1" style="background-color: rgba(0,0,0,0.5);">[m
[31m-            <div class="modal-dialog">[m
[31m-                <div class="modal-content text-light bg-dark">[m
[31m-                    <div class="modal-header">[m
[31m-                        <h5 class="modal-title">Pobieranie danych...</h5>[m
[31m-                    </div>[m
[31m-                    <div class="modal-body">[m
[31m-                        <div class="progress" role="progressbar" aria-label="Success striped example" aria-valuenow="@currentRefreshingIndex" aria-valuemin="0" aria-valuemax="@shippingEntries.Count">[m
[31m-                            <div class="progress-bar progress-bar-striped bg-success progress-bar-animated" style="width: @currentRefreshingIndex%"></div>[m
[31m-                        </div>[m
[31m-                    </div>[m
[31m-                </div>[m
[31m-            </div>[m
[31m-        </div>[m
[31m-    }[m
[31m-</div>[m
[31m-[m
[31m-[m
[31m-@code {[m
[31m-    private string productSearch = string.Empty;[m
[31m-    private string searchTerm = string.Empty;[m
[31m-[m
[31m-    private bool tmeEnabled;[m
[31m-    private List<ShippingEntryViewModel> shippingEntries = new List<ShippingEntryViewModel>();[m
[31m-    private ShippingEntryViewModel? editingEntry = null;[m
[31m-[m
[31m-    private List<Product> allProducts = new List<Product>();[m
[31m-    private List<Product> filteredProducts = new List<Product>();[m
[31m-[m
[31m-    private bool isLoading = false;[m
[31m-    private int currentRefreshingIndex = 1;[m
[31m-[m
[31m-    private IEnumerable<ShippingEntryViewModel> filteredShippings => shippingEntries[m
[31m-        .Where(e => string.IsNullOrWhiteSpace(searchTerm) ||[m
[31m-                    e.product.name.Contains(searchTerm, StringComparison.OrdinalIgnoreCase) ||[m
[31m-                    e.product.package.Contains(searchTerm, StringComparison.OrdinalIgnoreCase) ||[m
[31m-                    e.product.farnellID.Contains(searchTerm, StringComparison.OrdinalIgnoreCase) ||[m
[31m-                    e.product.tmeID.Contains(searchTerm, StringComparison.OrdinalIgnoreCase));[m
[31m-[m
[31m-    protected override async Task OnInitializedAsync()[m
[31m-    {[m
[31m-        allProducts = await ProductService.Get();[m
[31m-        shippingEntries = (await ShippingEntryService.GetModels()).OrderBy(se => se.product.name).ToList();[m
[31m-        tmeEnabled = await SystemSettingsService.GetSetting<bool>(name: "WÅ‚Ä…cz TME API");[m
[31m-[m
[31m-        // if there is product defined but no shipping entry, create empty shipping entry[m
[31m-        foreach(Product p in allProducts)[m
[31m-        {[m
[31m-            ShippingEntryViewModel? entry = shippingEntries.FirstOrDefault(se => se.product.id == p.id);[m
[31m-[m
[31m-            if(p.tmeID != null && entry == null)[m
[31m-            {[m
[31m-                ShippingEntryViewModel newEmptyEntry = ShippingEntryViewModel.Empty();[m
[31m-                newEmptyEntry.product = p;[m
[31m-[m
[31m-                entry = await ShippingEntryService.UpdateInfoOrInsertNew(newEmptyEntry);[m
[31m-                shippingEntries.Add(entry);[m
[31m-            }[m
[31m-        }[m
[31m-            [m
[31m-[m
[31m-        FilterProducts();[m
[31m-    }[m
[31m-    private void AddNew() => editingEntry = ShippingEntryViewModel.Empty();[m
[31m-    private void CloseAddModal() => editingEntry = null;[m
[31m-    private async void SaveEntry(EditContext context)[m
[31m-    {[m
[31m-        if(editingEntry == null) return;[m
[31m-[m
[31m-        if(editingEntry.product.id == Guid.Empty && filteredProducts.Count > 0)[m
[31m-            editingEntry.product = filteredProducts[0];[m
[31m-[m
[31m-        ShippingEntryViewModel newEntry = await ShippingEntryService.UpdateInfoOrInsertNew(editingEntry);[m
[31m-        if(shippingEntries.Any(x=>x.id == newEntry.id))[m
[31m-        {[m
[31m-            var index = shippingEntries.FindIndex(x => x.id == newEntry.id);[m
[31m-            shippingEntries[index] = newEntry;[m
[31m-        } [m
[31m-        else shippingEntries.Add(newEntry);[m
[31m-        editingEntry = null;[m
[31m-[m
[31m-        shippingEntries = (await ShippingEntryService.GetModels()).OrderBy(se => se.product.name).ToList();[m
[31m-        [m
[31m-        StateHasChanged();[m
[31m-    }[m
[31m-    private async Task RefreshValues()[m
[31m-    {[m
[31m-        isLoading = true;[m
[31m-        currentRefreshingIndex = 0;[m
[31m-        StateHasChanged();[m
[31m-[m
[31m-        int maxConcurrency = 5;[m
[31m-        using SemaphoreSlim semaphore = new SemaphoreSlim(maxConcurrency);[m
[31m-        object lockObj = new object();[m
[31m-[m
[31m-        IEnumerable<Task<ShippingEntryViewModel>>? tasks = shippingEntries.Select(async entry =>[m
[31m-        {[m
[31m-            await semaphore.WaitAsync();[m
[31m-            try[m
[31m-            {[m
[31m-                ShippingEntryViewModel updated = await ShippingEntryService.RefreshValue(entry);[m
[31m-[m
[31m-                lock (lockObj) currentRefreshingIndex++;[m
[31m-[m
[31m-                await InvokeAsync(StateHasChanged);[m
[31m-                return updated;[m
[31m-            }[m
[31m-            finally { semaphore.Release(); }[m
[31m-        });[m
[31m-[m
[31m-        ShippingEntryViewModel[]? results = await Task.WhenAll(tasks);[m
[31m-[m
[31m-        for (int i = 0; i < results.Length; i++) shippingEntries[i] = results[i];[m
[31m-[m
[31m-        isLoading = false;[m
[31m-        StateHasChanged();[m
[31m-    }[m
[31m-    private void OnProductSelected(ChangeEventArgs e)[m
[31m-    {[m
[31m-        if(editingEntry == null) return;[m
[31m-[m
[31m-        Guid selectedId = Guid.Parse(e.Value?.ToString() ?? Guid.Empty.ToString());[m
[31m-        Product? selectedProduct = allProducts.FirstOrDefault(p => p.id == selectedId);[m
[31m-[m
[31m-        if (selectedProduct != null) editingEntry.product = selectedProduct;[m
[31m-        StateHasChanged();[m
[31m-    }[m
[31m-    private void FilterProducts()[m
[31m-    {[m
[31m-[m
[31m-        Product? prevSelected = filteredProducts.Count > 0? filteredProducts[0] : null;[m
[31m-        filteredProducts = allProducts[m
[31m-            .Where(p => string.IsNullOrWhiteSpace(productSearch) || p.name.Contains(productSearch, StringComparison.OrdinalIgnoreCase))[m
[31m-            .OrderBy(p=>p.name)[m
[31m-            .ToList();[m
[31m-[m
[31m-        if(filteredProducts.Count > 0 && prevSelected != filteredProducts[0])[m
[31m-        {[m
[31m-            OnProductSelected(new ChangeEventArgs { Value = filteredProducts[0].id.ToString() });[m
[31m-        }[m
[31m-    }[m
[31m-}[m
\ No newline at end of file[m
[1mdiff --git a/Pages/Products.razor b/Pages/Products.razor[m
[1mdeleted file mode 100644[m
[1mindex f9cabd4..0000000[m
[1m--- a/Pages/Products.razor[m
[1m+++ /dev/null[m
[36m@@ -1,207 +0,0 @@[m
[31m-@page "/products"[m
[31m-[m
[31m-@using Magazynek.Entities[m
[31m-@using Magazynek.Services[m
[31m-@using Magazynek.Data[m
[31m-[m
[31m-@inject IProductService ProductService[m
[31m-[m
[31m-[m
[31m-[m
[31m-<PageTitle>Produkty</PageTitle>[m
[31m-[m
[31m-<div class="container mt-4">[m
[31m-    <div class="mb-3 searcher gap-4">[m
[31m-        <input class="form-control bg-dark text-light" type="text" placeholder="Szukaj..." @bind="searchTerm" />[m
[31m-        <button class="btn btn-success" @onclick="AddNew">[m
[31m-            <i class="bi bi-plus-circle"></i>[m
[31m-        </button>[m
[31m-    </div>[m
[31m-        <table class="table table-dark table-striped table-hover align-middle">[m
[31m-            <thead class="table-dark border-bottom border-light">[m
[31m-                <tr>[m
[31m-                    <th>Typ</th>[m
[31m-                    <th>Nazwa</th>[m
[31m-                    <th>Aktywny</th>[m
[31m-                    <th>Opis</th>[m
[31m-                    <th>Obudowa</th>[m
[31m-                    @* <th>Farnell ID</th> *@[m
[31m-                    <th>TME ID</th>[m
[31m-                    <th class="button-th">Akcje</th>[m
[31m-                </tr>[m
[31m-            </thead>[m
[31m-            <tbody>[m
[31m-                @foreach (Product product in filteredProducts)[m
[31m-                {[m
[31m-                    <tr>[m
[31m-                        <td>@product.type.GetLabel() @(product.type == Product.Type.RawMaterial? product.unit.GetAbbreviation() : "") </td>[m
[31m-                        <td>@product.name</td>[m
[31m-                        <td class="text-center"><BoolPresentation Value="product.active" /></td>[m
[31m-                        <td>@product.description</td>[m
[31m-                        <td>@product.package</td>[m
[31m-                        @* <td>@product.farnellID</td> *@[m
[31m-                        <td>@product.tmeID</td>[m
[31m-                        <td>[m
[31m-                            <div class="btn-group-wrapper">[m
[31m-                                <button class="btn btn-success" @onclick="() => Copy(product)">[m
[31m-                                    <i class="bi bi-copy"></i>[m
[31m-                                </button>[m
[31m-                                <button class="btn btn-light" @onclick="() => Edit(product)">[m
[31m-                                    <i class="bi bi-pencil"></i>[m
[31m-                                </button>[m
[31m-                                <button class="btn btn-danger" @onclick="() => Remove(product)">[m
[31m-                                    <i class="bi bi-trash"></i>[m
[31m-                                </button>[m
[31m-                            </div>[m
[31m-                        </td>[m
[31m-                    </tr>[m
[31m-                }[m
[31m-            </tbody>[m
[31m-        </table>[m
[31m-[m
[31m-    @if (editingProduct != null)[m
[31m-    {[m
[31m-        <div class="modal show d-block" tabindex="-1" style="background-color: rgba(0,0,0,0.5);">[m
[31m-            <div class="modal-dialog">[m
[31m-                <div class="modal-content text-light bg-dark">[m
[31m-                    <div class="modal-header">[m
[31m-                        <h5 class="modal-title">[m
[31m-                            @(editingProductIsNew ? "Dodaj produkt" : "Modyfikuj produkt")[m
[31m-                        </h5>[m
[31m-                        <button type="button" class="btn-close btn-close-white" @onclick="CloseEditModal"></button>[m
[31m-                    </div>[m
[31m-                    <div class="modal-body">[m
[31m-                        <EditForm Model="editingProduct" OnValidSubmit="SaveProduct">[m
[31m-                            <div class="mb-3">[m
[31m-                                <label for="type" class="form-label">Typ</label>[m
[31m-                                <InputSelect id="type" class="form-control" @bind-Value="editingProduct.type" TValue="Product.Type">[m
[31m-                                    @foreach (var type in Enum.GetValues<Product.Type>())[m
[31m-                                    {[m
[31m-                                        <option value="@type">@type.GetLabel()</option>[m
[31m-                                    }[m
[31m-                                </InputSelect>[m
[31m-                            </div>[m
[31m-                            <div class="mb-3">[m
[31m-                                <label for="el-name" class="form-label">Nazwa</label>[m
[31m-                                <InputText id="el-name" class="form-control" @bind-Value="editingProduct.name" />[m
[31m-                            </div>[m
[31m-                            <div class="mb-3">[m
[31m-                                <label for="desc" class="form-label">Opis</label>[m
[31m-                                <InputText id="desc" class="form-control" @bind-Value="editingProduct.description" />[m
[31m-                            </div>[m
[31m-                            @if(editingProduct.type == Product.Type.RawMaterial)[m
[31m-                            {[m
[31m-                                <div class="mb-3">[m
[31m-                                    <label for="unit" class="form-label">Jednostka</label>[m
[31m-                                    <InputSelect id="unit" class="form-control" @bind-Value="editingProduct.unit" TValue="Product.Unit">[m
[31m-                                        @foreach (Product.Unit unit in Enum.GetValues<Product.Unit>())[m
[31m-                                        {[m
[31m-                                            <option value="@unit">@unit.GetLabel()</option>[m
[31m-                                        }[m
[31m-                                    </InputSelect>[m
[31m-                                </div>[m
[31m-                            }[m
[31m-                            <div class="mb-3">[m
[31m-                                <label for="active" class="form-label">Aktywny</label>[m
[31m-                                <InputCheckbox id="active" @bind-Value="editingProduct.active" class="form-controldot"/>[m
[31m-                            </div>[m
[31m-                            <div class="mb-3">[m
[31m-                                <label for="enclosure" class="form-label">Obudowa</label>[m
[31m-                                <InputText id="enclosure" class="form-control" @bind-Value="editingProduct.package" />[m
[31m-                            </div>[m
[31m-                            <div class="mb-3">[m
[31m-                                <label for="farnell" class="form-label">Farnell ID</label>[m
[31m-                                <InputText id="farnell" class="form-control" @bind-Value="editingProduct.farnellID" />[m
[31m-                            </div>[m
[31m-                            <div class="mb-3">[m
[31m-                                <label for="tme" class="form-label">TME ID</label>[m
[31m-                                <InputText id="tme" class="form-control" @bind-Value="editingProduct.tmeID" />[m
[31m-                            </div>[m
[31m-                            <button type="submit" class="btn btn-success"><i class="bi bi-floppy-fill"></i> Zapisz</button>[m
[31m-                        </EditForm>[m
[31m-                    </div>[m
[31m-                </div>[m
[31m-            </div>[m
[31m-        </div>[m
[31m-    }[m
[31m-</div>[m
[31m-[m
[31m-[m
[31m-@code {[m
[31m-    private string searchTerm = "";[m
[31m-    private ProductViewModel? editingProduct = null;[m
[31m-    private bool editingProductIsNew = false;[m
[31m-    private List<Product> products = new();[m
[31m-    [m
[31m-    private IEnumerable<Product> filteredProducts => products[m
[31m-        .Where(p => string.IsNullOrWhiteSpace(searchTerm) ||[m
[31m-                    p.name.Contains(searchTerm, StringComparison.OrdinalIgnoreCase) ||[m
[31m-                    p.package.Contains(searchTerm, StringComparison.OrdinalIgnoreCase) ||[m
[31m-                    p.farnellID.Contains(searchTerm, StringComparison.OrdinalIgnoreCase) ||[m
[31m-                    p.tmeID.Contains(searchTerm, StringComparison.OrdinalIgnoreCase));[m
[31m-[m
[31m-    protected override async Task OnParametersSetAsync() {[m
[31m-        products = (await ProductService.Get())[m
[31m-            .OrderBy(p => p.type)[m
[31m-            .ThenBy(p => p.name)[m
[31m-            .ToList();[m
[31m-    }[m
[31m-    private void Edit(Product p) {[m
[31m-        editingProductIsNew = false;[m
[31m-        editingProduct = new ProductViewModel(p);[m
[31m-    }[m
[31m-    private async void Remove(Product p) {[m
[31m-        await ProductService.Remove(p);[m
[31m-        products.Remove(p);[m
[31m-        StateHasChanged();[m
[31m-    }[m
[31m-    private void Copy(Product p)[m
[31m-    {[m
[31m-        editingProductIsNew = true;[m
[31m-        editingProduct = new ProductViewModel(new Product([m
[31m-            name: p.name + " - KOPIA", [m
[31m-            package: p.package, [m
[31m-            farnellID: p.farnellID, [m
[31m-            tmeID: p.tmeID,[m
[31m-            description: p.description,[m
[31m-            active: p.active,[m
[31m-            type: p.type,[m
[31m-            unit: p.unit[m
[31m-        ));[m
[31m-    }[m
[31m-    [m
[31m-    private void AddNew() {[m
[31m-        editingProductIsNew = true;[m
[31m-        editingProduct = new ProductViewModel(product: new Product([m
[31m-            name: "NOWY",[m
[31m-            package: "",[m
[31m-            farnellID: "",[m
[31m-            tmeID: "",[m
[31m-            description: "",[m
[31m-            active: false,[m
[31m-            type: Product.Type.Item,[m
[31m-            unit: Product.Unit.Meter[m
[31m-        ));[m
[31m-    }[m
[31m-    private void CloseEditModal() {[m
[31m-        editingProduct = null;[m
[31m-    }[m
[31m-    private async void SaveProduct(EditContext context)[m
[31m-    {[m
[31m-        if(editingProduct == null) return;[m
[31m-[m
[31m-        Product newProduct = await ProductService.UpdateInfoOrInsertNew(editingProduct);[m
[31m-        Product? existingProduct = products.FirstOrDefault(x => x.id == newProduct.id);[m
[31m-        if(existingProduct == null) products.Add(newProduct);[m
[31m-        else {[m
[31m-            existingProduct.SetName(newProduct.name);[m
[31m-            existingProduct.SetPackage(newProduct.package);[m
[31m-            existingProduct.SetFarnellID(newProduct.farnellID);[m
[31m-            existingProduct.SetTmeID(newProduct.tmeID);[m
[31m-        }[m
[31m-        editingProduct = null;[m
[31m-[m
[31m-        products = products.OrderBy(p=>p.name).ToList();[m
[31m-        StateHasChanged();[m
[31m-    }[m
[31m-}[m
\ No newline at end of file[m
[1mdiff --git a/Pages/Projects.razor b/Pages/Projects.razor[m
[1mdeleted file mode 100644[m
[1mindex e003a0d..0000000[m
[1m--- a/Pages/Projects.razor[m
[1m+++ /dev/null[m
[36m@@ -1,182 +0,0 @@[m
[31m-@page "/projects"[m
[31m-[m
[31m-@using Magazynek.Entities[m
[31m-@using Magazynek.Services[m
[31m-[m
[31m-@inject IProductService ProductService[m
[31m-@inject IProjectService ProjectService[m
[31m-@inject IShippingEntryService ShippingEntryService[m
[31m-[m
[31m-[m
[31m-<PageTitle>Projekty</PageTitle>[m
[31m-[m
[31m-<div class="container mt-4">[m
[31m-    <div class="mb-3 searcher gap-4">[m
[31m-        <input class="form-control bg-dark text-light" type="text" placeholder="Szukaj..." @bind="searchTerm" />[m
[31m-        <button class="btn btn-success" @onclick="AddNew">[m
[31m-            <i class="bi bi-plus-circle"></i>[m
[31m-        </button>[m
[31m-    </div>[m
[31m-    <table class="table table-dark table-striped table-hover align-middle">[m
[31m-        <thead class="table-dark border-bottom border-light">[m
[31m-            <tr >[m
[31m-                <th rowspan="2" class="align-middle">Nazwa</th>[m
[31m-                <th rowspan="2" class="align-middle text-center" style="width:120px">KompletnoÅ›Ä‡</th>[m
[31m-                <th colspan="2" class="align-middle text-center">WartoÅ›Ä‡ [PLN]</th>[m
[31m-                <th rowspan="2" class="align-middle button-th">Akcje</th>[m
[31m-            </tr>[m
[31m-            <tr>[m
[31m-                <th style="width:80px" class="text-center">BrakujÄ…ca</th>[m
[31m-                <th style="width:80px" class="text-center">CaÅ‚kowita</th>[m
[31m-            </tr>[m
[31m-        </thead>[m
[31m-        <tbody>[m
[31m-            @foreach(Project project in filteredProjects)[m
[31m-            {[m
[31m-                <tr>[m
[31m-                    <td>@project.name</td>[m
[31m-                    <td class="text-center">@project.GetBoughtItemsPercentReadiness(shippingEntries) %</td>[m
[31m-                    <td class="text-center">@project.GetMissingValue(shippingEntries)</td>[m
[31m-                    <td class="text-center">@project.GetTotalValue(shippingEntries).ToString(format: "0.00")</td>[m
[31m-                    <td>[m
[31m-                        <button class="btn btn-light" @onclick="() => Edit(project)">[m
[31m-                            <i class="bi bi-pencil"></i>[m
[31m-                        </button>[m
[31m-                        <button class="btn btn-danger" @onclick="() => Remove(project)">[m
[31m-                            <i class="bi bi-trash"></i>[m
[31m-                        </button>[m
[31m-                    </td>[m
[31m-                </tr>[m
[31m-                <tr>[m
[31m-                    <td colspan="5" class="bom-view">[m
[31m-                        <div class="container text-center">[m
[31m-                            <h5>Elementy BOM</h5>[m
[31m-                            <div class="row row-cols-4">[m
[31m-                                @foreach(ProjectItem item in project.items)[m
[31m-                                {[m
[31m-                                    ShippingEntryViewModel? entry = shippingEntries.FirstOrDefault(se => se.product.id == item.itemID);[m
[31m-                                    int availableQty = item.GetAvailableQuantity(shippingEntries);[m
[31m-                                    ProjectItem.ErrorState errorState = ProjectItem.GetErrorState(entry, item.quantity);[m
[31m-[m
[31m-                                    <div class="col bom-item @(errorState switch[m
[31m-                                    {[m
[31m-                                        ProjectItem.ErrorState.NotInStockAtAll => "text-danger",[m
[31m-                                        ProjectItem.ErrorState.NotEnoughBought => "text-warning",[m
[31m-                                        _ => "text-success"[m
[31m-                                    })">[m
[31m-                                        <p>@item.product?.name</p>[m
[31m-                                        <p>@availableQty / @item.quantity</p>[m
[31m-                                    </div>[m
[31m-                                }[m
[31m-                            </div>[m
[31m-                        </div>[m
[31m-                    </td>[m
[31m-                </tr>[m
[31m-            }[m
[31m-        </tbody>[m
[31m-    </table>[m
[31m-[m
[31m-    @if (editingProject != null)[m
[31m-    {[m
[31m-    <div class="modal show d-block" tabindex="-1" style="background-color: rgba(0,0,0,0.5);">[m
[31m-        <div class="modal-dialog">[m
[31m-            <div class="modal-content text-light bg-dark">[m
[31m-                <div class="modal-header">[m
[31m-                    <h5 class="modal-title">[m
[31m-                        @(editingIsNew ? "Dodaj projekt" : "Modyfikuj projekt")[m
[31m-                    </h5>[m
[31m-                    <button type="button" class="btn-close btn-close-white" @onclick="CloseEditModal"></button>[m
[31m-                </div>[m
[31m-                <div class="modal-body">[m
[31m-                    <EditForm Model="editingProject" OnValidSubmit="Save" >[m
[31m-                        <div class="mb-3">[m
[31m-                            <label class="form-label">Nazwa</label>[m
[31m-                            <InputText class="form-control" @bind-Value="editingProject.name" />[m
[31m-                        </div>[m
[31m-                        <div class="mb-3">[m
[31m-                            <span class="form-label">BOM</span>[m
[31m-                            @for(int i = 0; i < editingProject.items.Count; i++)[m
[31m-                            {[m
[31m-                                int index = i;[m
[31m-                                <div class="horizontal gap-3">[m
[31m-                                    <InputSelect class="form-select" @bind-Value="editingProject.items[index].itemID">[m
[31m-                                        <option value="@Guid.Empty">Wybierz produkt</option>[m
[31m-                                        @foreach (Product product in products)[m
[31m-                                        {[m
[31m-                                            <option value="@product.id">@product.name</option>[m
[31m-                                        }[m
[31m-                                    </InputSelect>[m
[31m-                                    <InputNumber class="form-control" @bind-Value="editingProject.items[index].quantity" />[m
[31m-                                    <button type="button" class="btn btn-danger" @onclick="() => editingProject.Removeitem(editingProject.items[index])">[m
[31m-                                        <i class="bi bi-trash"></i>[m
[31m-                                    </button>[m
[31m-                                </div>[m
[31m-                            }[m
[31m-                            <button type="button" class="btn btn-success btn-row-add" @onclick="AddRow"><i class="bi bi-plus-circle"></i></button>[m
[31m-                        </div>[m
[31m-                        [m
[31m-                        <button type="submit" class="btn btn-success"><i class="bi bi-floppy-fill"></i> Zapisz</button>[m
[31m-                    </EditForm>[m
[31m-                </div>[m
[31m-            </div>[m
[31m-        </div>[m
[31m-    </div>[m
[31m-    }[m
[31m-</div>[m
[31m-[m
[31m-@code {[m
[31m-    private string searchTerm = "";[m
[31m-    private Project? editingProject = null;[m
[31m-    private bool editingIsNew = false;[m
[31m-    private List<Project> projects = new List<Project>();[m
[31m-    private List<Product> products = new List<Product>();[m
[31m-    private List<ShippingEntryViewModel> shippingEntries = new List<ShippingEntryViewModel>();[m
[31m-[m
[31m-    private IEnumerable<Project> filteredProjects => string.IsNullOrWhiteSpace(searchTerm)[m
[31m-        ? projects[m
[31m-        : projects.Where(p => p.name.Contains(searchTerm, StringComparison.OrdinalIgnoreCase));[m
[31m-[m
[31m-    protected override async Task OnParametersSetAsync() {[m
[31m-        projects = await ProjectService.Get();[m
[31m-        products = (await ProductService.Get()).OrderBy(p => p.name).ToList();[m
[31m-        shippingEntries = await ShippingEntryService.GetModels();[m
[31m-    }[m
[31m-    private void CloseEditModal() {[m
[31m-        editingProject = null;[m
[31m-    }[m
[31m-    private void Edit(Project p) {[m
[31m-        editingIsNew = false;[m
[31m-        editingProject = new Project(p);[m
[31m-    }[m
[31m-    private async void Remove(Project p) {[m
[31m-        await ProjectService.Remove(p);[m
[31m-        projects.Remove(p);[m
[31m-        StateHasChanged();[m
[31m-    }[m
[31m-    private void AddNew() {[m
[31m-        editingIsNew = true;[m
[31m-        editingProject = new Project("");[m
[31m-    }[m
[31m-    private void AddRow() {[m
[31m-        if (editingProject == null) return;[m
[31m-[m
[31m-        editingProject.AddItem(product: null, quantity: 0);[m
[31m-    }[m
[31m-    private async void Save(EditContext context)[m
[31m-    {[m
[31m-        if(editingProject == null) return;[m
[31m-[m
[31m-        Project newOne = await ProjectService.UpdateInfoOrInsertNew(editingProject);[m
[31m-[m
[31m-        Project? existingProject = projects.FirstOrDefault(x => x.id == newOne.id);[m
[31m-        if(existingProject == null) projects.Add(newOne);[m
[31m-        else {[m
[31m-            existingProject.name = newOne.name;[m
[31m-            existingProject.SetItems(newOne.items);[m
[31m-        }[m
[31m-        [m
[31m-        editingProject = null;[m
[31m-        StateHasChanged();[m
[31m-    }[m
[31m-}[m
[31m-[m
[1mdiff --git a/Pages/Settings.razor b/Pages/Settings.razor[m
[1mdeleted file mode 100644[m
[1mindex 46d0ad9..0000000[m
[1m--- a/Pages/Settings.razor[m
[1m+++ /dev/null[m
[36m@@ -1,72 +0,0 @@[m
[31m-@page "/settings"[m
[31m-[m
[31m-@using Magazynek.Entities[m
[31m-@using Magazynek.Services[m
[31m-[m
[31m-@inject ISystemSettingsService SystemSettingsService[m
[31m-[m
[31m-<PageTitle>Ustawienia</PageTitle>[m
[31m-[m
[31m-<div class="container mt-4">[m
[31m-    <table class="table table-dark table-striped table-hover align-middle">[m
[31m-        <thead class="table-dark border-bottom border-light">[m
[31m-            <tr>[m
[31m-                <th>Nazwa</th>[m
[31m-                <th>Parametr</th>[m
[31m-            </tr>[m
[31m-        </thead>[m
[31m-        <tbody>[m
[31m-            @for(int i = 0; i < settings.Count; i++)[m
[31m-            {[m
[31m-                int index = i;[m
[31m-                <tr>[m
[31m-                    <td>@settings[index].name</td>[m
[31m-                    <td>[m
[31m-                        @switch(settings[index].type)[m
[31m-                        {[m
[31m-                            case SystemSetting.SettingType.STRING:[m
[31m-                                <InputText class="form-control bg-dark text-light" @bind-Value="settings[index].value" />[m
[31m-                                break;[m
[31m-                            case SystemSetting.SettingType.INT:[m
[31m-                                <InputNumber class="form-control bg-dark text-light" @bind-Value="settings[index].i_value" />[m
[31m-                                break;[m
[31m-                            case SystemSetting.SettingType.FLOAT:[m
[31m-                                <InputNumber class="form-control bg-dark text-light" @bind-Value="settings[index].f_value" />[m
[31m-                                break;[m
[31m-                            case SystemSetting.SettingType.BOOL:[m
[31m-                                @code{ [m
[31m-                                    Guid guid = Guid.NewGuid(); [m
[31m-                                }[m
[31m-                                <InputCheckbox @bind-Value="settings[index].b_value"[m
[31m-                                    class="btn-check"[m
[31m-                                    id="@guid" />[m
[31m-[m
[31m-                                <label class="btn btn-outline-primary" for="@guid">[m
[31m-                                    @(settings[index].b_value ? "TAK" : "NIE")[m
[31m-                                </label>[m
[31m-                                break;[m
[31m-                            default: break;[m
[31m-                        }[m
[31m-                    </td>[m
[31m-                </tr>[m
[31m-            }[m
[31m-        </tbody>[m
[31m-    </table> [m
[31m-    <button type="submit" class="btn btn-success" @onclick="SaveSettings"><i class="bi bi-floppy-fill"></i> Zapisz</button>[m
[31m-</div>[m
[31m-[m
[31m-[m
[31m-@code {[m
[31m-    private List<SystemSetting> settings = new List<SystemSetting>();[m
[31m-[m
[31m-[m
[31m-    protected override async Task OnParametersSetAsync()[m
[31m-    {[m
[31m-        settings = await SystemSettingsService.GetSettings();[m
[31m-    }[m
[31m-[m
[31m-    private async Task SaveSettings()[m
[31m-    {[m
[31m-        foreach (SystemSetting setting in settings) await SystemSettingsService.SaveSetting(setting);[m
[31m-    }[m
[31m-}[m
\ No newline at end of file[m
[1mdiff --git a/Pages/_Host.cshtml b/Pages/_Host.cshtml[m
[1mdeleted file mode 100644[m
[1mindex 1309ad3..0000000[m
[1m--- a/Pages/_Host.cshtml[m
[1m+++ /dev/null[m
[36m@@ -1,35 +0,0 @@[m
[31m-ï»¿@page "/"[m
[31m-@using Microsoft.AspNetCore.Components.Web[m
[31m-@namespace Magazynek.Pages[m
[31m-@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers[m
[31m-[m
[31m-<!DOCTYPE html>[m
[31m-<html lang="en">[m
[31m-<head>[m
[31m-    <meta charset="utf-8" />[m
[31m-    <meta name="viewport" content="width=device-width, initial-scale=1.0" />[m
[31m-    <base href="~/" />[m
[31m-    <link rel="stylesheet" href="css/bootstrap/bootstrap.min.css" />[m
[31m-    <link href="css/site.css" rel="stylesheet" />[m
[31m-    <link href="Magazynek.styles.css" rel="stylesheet" />[m
[31m-    <link rel="icon" type="image/png" href="favicon.png"/>[m
[31m-    <component type="typeof(HeadOutlet)" render-mode="ServerPrerendered" />[m
[31m-    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">[m
[31m-</head>[m
[31m-<body data-bs-theme="dark">[m
[31m-    <component type="typeof(App)" render-mode="ServerPrerendered" />[m
[31m-[m
[31m-    <div id="blazor-error-ui">[m
[31m-        <environment include="Staging,Production">[m
[31m-            An error has occurred. This application may no longer respond until reloaded.[m
[31m-        </environment>[m
[31m-        <environment include="Development">[m
[31m-            An unhandled exception has occurred. See browser dev tools for details.[m
[31m-        </environment>[m
[31m-        <a href="" class="reload">Reload</a>[m
[31m-        <a class="dismiss">ðŸ—™</a>[m
[31m-    </div>[m
[31m-[m
[31m-    <script src="_framework/blazor.server.js"></script>[m
[31m-</body>[m
[31m-</html>[m
[1mdiff --git a/Program.cs b/Program.cs[m
[1mdeleted file mode 100644[m
[1mindex de02df0..0000000[m
[1m--- a/Program.cs[m
[1m+++ /dev/null[m
[36m@@ -1,56 +0,0 @@[m
[31m-using Magazynek.Data;[m
[31m-using Magazynek.Entities;[m
[31m-using Magazynek.Services;[m
[31m-using Microsoft.EntityFrameworkCore;[m
[31m-[m
[31m-var builder = WebApplication.CreateBuilder(args);[m
[31m-[m
[31m-// Add services to the container.[m
[31m-builder.Services.AddRazorPages();[m
[31m-builder.Services.AddServerSideBlazor();[m
[31m-builder.Services.AddHttpContextAccessor();[m
[31m-builder.Services.AddDataProtection();[m
[31m-[m
[31m-[m
[31m-builder.WebHost.ConfigureKestrel(serverOptions =>[m
[31m-{[m
[31m-    serverOptions.ListenAnyIP(5035);[m
[31m-});[m
[31m-[m
[31m-string connectionString = builder.Configuration.GetConnectionString("MainDB")!;[m
[31m-builder.Services.AddDbContextFactory<DatabaseContext>(options =>[m
[31m-{[m
[31m-    options.UseNpgsql(connectionString);[m
[31m-    options.LogTo(Console.WriteLine, LogLevel.Error);[m
[31m-});[m
[31m-[m
[31m-builder.Services.AddScoped<ISystemSettingsService,     SystemSettingsService>();[m
[31m-builder.Services.AddScoped<ITmeService,                TmeService>();[m
[31m-builder.Services.AddScoped<IProductService,            ProductService>();[m
[31m-builder.Services.AddScoped<IShippingEntryService,      ShippingEntryService>();[m
[31m-builder.Services.AddScoped<IProjectService,            ProjectService>();[m
[31m-builder.Services.AddScoped<IProjectReservationService, ProjectReservationService>();[m
[31m-[m
[31m-var app = builder.Build();[m
[31m-[m
[31m-// Configure the HTTP request pipeline.[m
[31m-if (!app.Environment.IsDevelopment())[m
[31m-{[m
[31m-    app.UseExceptionHandler("/Error");[m
[31m-    // The default HSTS value is 30 days. You may want to change this for production scenarios, see https://aka.ms/aspnetcore-hsts.[m
[31m-    app.UseHsts();[m
[31m-}[m
[31m-[m
[31m-app.UseHttpsRedirection();[m
[31m-[m
[31m-app.UseStaticFiles();[m
[31m-[m
[31m-app.UseRouting();[m
[31m-[m
[31m-app.MapBlazorHub();[m
[31m-app.MapFallbackToPage("/_Host");[m
[31m-[m
[31m-Console.WriteLine("Running startup things...");[m
[31m-await StartupHelper.InitApplicationAsync(app.Services);[m
[31m-Console.WriteLine("Done!");[m
[31m-app.Run();[m
[1mdiff --git a/Properties/launchSettings.json b/Properties/launchSettings.json[m
[1mdeleted file mode 100644[m
[1mindex ccc5b80..0000000[m
[1m--- a/Properties/launchSettings.json[m
[1m+++ /dev/null[m
[36m@@ -1,37 +0,0 @@[m
[31m-{[m
[31m-  "iisSettings": {[m
[31m-    "windowsAuthentication": false,[m
[31m-    "anonymousAuthentication": true,[m
[31m-    "iisExpress": {[m
[31m-      "applicationUrl": "http://localhost:56910",[m
[31m-      "sslPort": 44316[m
[31m-    }[m
[31m-  },[m
[31m-  "profiles": {[m
[31m-    "http": {[m
[31m-      "commandName": "Project",[m
[31m-      "dotnetRunMessages": true,[m
[31m-      "launchBrowser": false,[m
[31m-      "applicationUrl": "http://localhost:5073",[m
[31m-      "environmentVariables": {[m
[31m-        "ASPNETCORE_ENVIRONMENT": "Development"[m
[31m-      }[m
[31m-    },[m
[31m-    "https": {[m
[31m-      "commandName": "Project",[m
[31m-      "dotnetRunMessages": true,[m
[31m-      "launchBrowser": false,[m
[31m-      "applicationUrl": "https://localhost:7075;http://localhost:5073",[m
[31m-      "environmentVariables": {[m
[31m-        "ASPNETCORE_ENVIRONMENT": "Development"[m
[31m-      }[m
[31m-    },[m
[31m-    "IIS Express": {[m
[31m-      "commandName": "IISExpress",[m
[31m-      "launchBrowser": false,[m
[31m-      "environmentVariables": {[m
[31m-        "ASPNETCORE_ENVIRONMENT": "Development"[m
[31m-      }[m
[31m-    }[m
[31m-  }[m
[31m-}[m
[1mdiff --git a/Services/ProductService.cs b/Services/ProductService.cs[m
[1mdeleted file mode 100644[m
[1mindex 1652297..0000000[m
[1m--- a/Services/ProductService.cs[m
[1m+++ /dev/null[m
[36m@@ -1,61 +0,0 @@[m
[31m-using Magazynek.Data;[m
[31m-using Magazynek.Entities;[m
[31m-using Microsoft.EntityFrameworkCore;[m
[31m-[m
[31m-namespace Magazynek.Services[m
[31m-{[m
[31m-    public interface IProductService[m
[31m-    {[m
[31m-        Task<List<Product>> Get();[m
[31m-        Task<Product?> GetByID(Guid ID);[m
[31m-        Task<Product> UpdateInfoOrInsertNew(ProductViewModel product);[m
[31m-        Task<bool> Remove(Product product);[m
[31m-    }[m
[31m-[m
[31m-    public class ProductService : IProductService[m
[31m-    {[m
[31m-        readonly DatabaseContext database;[m
[31m-[m
[31m-        public ProductService(DatabaseContext database) => this.database = database;[m
[31m-        public Task<List<Product>> Get() => database.Products.ToListAsync();[m
[31m-        public Task<Product?> GetByID(Guid id) => database.Products.FirstOrDefaultAsync(x => x.id == id);[m
[31m-        public async Task<Product> UpdateInfoOrInsertNew(ProductViewModel product)[m
[31m-        {[m
[31m-            Product? dbProduct = await database.Products.FirstOrDefaultAsync(x => x.id == product.id);[m
[31m-            if (dbProduct != null)[m
[31m-            {[m
[31m-                dbProduct.SetName(product.name);[m
[31m-                dbProduct.SetPackage(product.package);[m
[31m-                dbProduct.SetFarnellID(product.farnellID);[m
[31m-                dbProduct.SetTmeID(product.tmeID);[m
[31m-                dbProduct.SetDescription(product.description);[m
[31m-                dbProduct.SetActive(product.active);[m
[31m-                dbProduct.SetType(product.type);[m
[31m-                dbProduct.SetUnit(product.unit);[m
[31m-            }[m
[31m-            else[m
[31m-            {[m
[31m-                dbProduct = new Product([m
[31m-                    product.name,[m
[31m-                    product.package,[m
[31m-                    product.farnellID,[m
[31m-                    product.tmeID,[m
[31m-                    product.description,[m
[31m-                    product.active,[m
[31m-                    product.type,[m
[31m-                    product.unit[m
[31m-                );[m
[31m-                await database.Products.AddAsync(dbProduct);[m
[31m-            }[m
[31m-            await database.SaveChangesAsync();[m
[31m-            return dbProduct;[m
[31m-        }[m
[31m-[m
[31m-        public async Task<bool> Remove(Product product)[m
[31m-        {[m
[31m-            database.Products.Remove(product);[m
[31m-            await database.SaveChangesAsync();[m
[31m-            return true;[m
[31m-        }[m
[31m-    }[m
[31m-}[m
\ No newline at end of file[m
[1mdiff --git a/Services/ProjectReservationService.cs b/Services/ProjectReservationService.cs[m
[1mdeleted file mode 100644[m
[1mindex e40ebd3..0000000[m
[1m--- a/Services/ProjectReservationService.cs[m
[1m+++ /dev/null[m
[36m@@ -1,34 +0,0 @@[m
[31m-using Magazynek.Data;[m
[31m-using Magazynek.Entities;[m
[31m-using Microsoft.EntityFrameworkCore;[m
[31m-[m
[31m-namespace Magazynek.Services[m
[31m-{[m
[31m-    public interface IProjectReservationService[m
[31m-    {[m
[31m-        Task<List<ProjectRealizationViewModel>> Get();[m
[31m-        Task<ProjectRealizationViewModel> UpdateInfoOrInsertNew(ProjectRealizationViewModel product);[m
[31m-    }[m
[31m-[m
[31m-    public class ProjectReservationService : IProjectReservationService[m
[31m-    {[m
[31m-        readonly DatabaseContext database;[m
[31m-[m
[31m-        public ProjectReservationService(DatabaseContext database) => this.database = database;[m
[31m-        [m
[31m-[m
[31m-        public async Task<List<ProjectRealizationViewModel>> Get()[m
[31m-        {[m
[31m-            List<ProjectRealizationViewModel> realizations = new();[m
[31m-            [m
[31m-            await Task.Delay(0); // Simulate async operation[m
[31m-[m
[31m-            return realizations;[m
[31m-        }[m
[31m-        public async Task<ProjectRealizationViewModel> UpdateInfoOrInsertNew(ProjectRealizationViewModel model)[m
[31m-        {[m
[31m-            await Task.Delay(0);[m
[31m-            return model;[m
[31m-        }[m
[31m-    }[m
[31m-}[m
\ No newline at end of file[m
[1mdiff --git a/Services/ProjectService.cs b/Services/ProjectService.cs[m
[1mdeleted file mode 100644[m
[1mindex 8d83faf..0000000[m
[1m--- a/Services/ProjectService.cs[m
[1m+++ /dev/null[m
[36m@@ -1,99 +0,0 @@[m
[31m-using Magazynek.Data;[m
[31m-using Magazynek.Entities;[m
[31m-using Microsoft.EntityFrameworkCore;[m
[31m-[m
[31m-namespace Magazynek.Services[m
[31m-{[m
[31m-    public interface IProjectService[m
[31m-    {[m
[31m-        Task<List<Project>> Get();[m
[31m-        Task<Project?> GetByID(Guid ID);[m
[31m-        Task<Project> UpdateInfoOrInsertNew(Project product);[m
[31m-        Task<bool> Remove(Project product);[m
[31m-    }[m
[31m-[m
[31m-    public class ProjectService : IProjectService[m
[31m-    {[m
[31m-        readonly DatabaseContext database;[m
[31m-[m
[31m-        public ProjectService(DatabaseContext database) => this.database = database;[m
[31m-[m
[31m-        public async Task<List<Project>> Get()[m
[31m-        {[m
[31m-            List<Project> projects = new List<Project>();[m
[31m-            foreach (var proj in await database.Projects.ToListAsync())[m
[31m-            {[m
[31m-                List<ProjectItem> items = await database.ProjectItems.Where(pi => pi.projectID == proj.id).ToListAsync();[m
[31m-                foreach(ProjectItem item in items)[m
[31m-                {[m
[31m-                    item.product = await database.Products.FirstOrDefaultAsync(p => p.id == item.itemID);[m
[31m-                }[m
[31m-                projects.Add(new Project(proj, items));[m
[31m-            }[m
[31m-            return projects;[m
[31m-        }[m
[31m-[m
[31m-        public async Task<Project?> GetByID(Guid id)[m
[31m-        {[m
[31m-            Project? p = await database.Projects.FirstOrDefaultAsync(x => x.id == id);[m
[31m-            if (p == null) return null;[m
[31m-[m
[31m-            List<ProjectItem> items = await database.ProjectItems.Where(pi => pi.projectID == p.id).ToListAsync();[m
[31m-            p = new Project(p, items);[m
[31m-            return p;[m
[31m-        }[m
[31m-        public async Task<Project> UpdateInfoOrInsertNew(Project project)[m
[31m-        {[m
[31m-            Console.WriteLine($"Updating or inserting project: {project}");[m
[31m-            Console.WriteLine($"With items:{Environment.NewLine}{string.Join(Environment.NewLine, project.items)}");[m
[31m-[m
[31m-            Project? dbProject = await GetByID(project.id);[m
[31m-            if (dbProject != null)[m
[31m-            {[m
[31m-                dbProject.name = project.name;[m
[31m-[m
[31m-                // Remove items that are no longer present[m
[31m-                for (int i = 0; i < dbProject.items.Count; i++)[m
[31m-                {[m
[31m-                    if (project.items.Any(x => x.id == dbProject.items[i].id)) continue;[m
[31m-                    database.ProjectItems.Remove(dbProject.items[i]);[m
[31m-                    dbProject.items.Remove(dbProject.items[i]);[m
[31m-                    i--;[m
[31m-                }[m
[31m-[m
[31m-                // Update existing items or add new ones[m
[31m-                foreach (var item in project.items)[m
[31m-                {[m
[31m-                    var existing = dbProject.items.FirstOrDefault(i => i.id == item.id);[m
[31m-[m
[31m-                    if (existing != null)[m
[31m-                    {[m
[31m-                        existing.itemID = item.itemID;[m
[31m-                        existing.quantity = item.quantity;[m
[31m-                    }[m
[31m-                    else[m
[31m-                    {[m
[31m-                        dbProject.items.Add(item);[m
[31m-                        await database.ProjectItems.AddAsync(item);[m
[31m-                    }[m
[31m-                }[m
[31m-            }[m
[31m-            else[m
[31m-            {[m
[31m-                dbProject = new Project(project);[m
[31m-                await database.Projects.AddAsync(dbProject);[m
[31m-                foreach (var item in project.items) await database.ProjectItems.AddAsync(item);[m
[31m-            } [m
[31m-[m
[31m-            await database.SaveChangesAsync();[m
[31m-            return dbProject;[m
[31m-        }[m
[31m-[m
[31m-        public async Task<bool> Remove(Project project)[m
[31m-        {[m
[31m-            database.Projects.Remove(project);[m
[31m-            await database.SaveChangesAsync();[m
[31m-            return true;[m
[31m-        }[m
[31m-    }[m
[31m-}[m
\ No newline at end of file[m
[1mdiff --git a/Services/ShippingEntryService.cs b/Services/ShippingEntryService.cs[m
[1mdeleted file mode 100644[m
[1mindex 26b20c7..0000000[m
[1m--- a/Services/ShippingEntryService.cs[m
[1m+++ /dev/null[m
[36m@@ -1,106 +0,0 @@[m
[31m-using Magazynek.Data;[m
[31m-using Magazynek.Entities;[m
[31m-using Microsoft.EntityFrameworkCore;[m
[31m-[m
[31m-[m
[31m-namespace Magazynek.Services;[m
[31m-[m
[31m-public interface IShippingEntryService[m
[31m-{[m
[31m-    Task<List<ShippingEntry>> Get();[m
[31m-    Task<List<ShippingEntryViewModel>> GetModels();[m
[31m-    Task<ShippingEntryViewModel> UpdateInfoOrInsertNew(ShippingEntryViewModel product);[m
[31m-    Task<ShippingEntryViewModel> RefreshValue(ShippingEntryViewModel entry);[m
[31m-}[m
[31m-[m
[31m-public class ShippingEntryService : IShippingEntryService[m
[31m-{[m
[31m-    private readonly IDbContextFactory<DatabaseContext> dbContextFactory;[m
[31m-    readonly ITmeService tmeService;[m
[31m-[m
[31m-    public ShippingEntryService(IDbContextFactory<DatabaseContext> dbContextFactory, ITmeService tmeService)[m
[31m-    {[m
[31m-        this.dbContextFactory = dbContextFactory;[m
[31m-        this.tmeService = tmeService;[m
[31m-    }[m
[31m-[m
[31m-    public async Task<List<ShippingEntry>> Get()[m
[31m-    {[m
[31m-        await using var database = await dbContextFactory.CreateDbContextAsync();[m
[31m-        return await database.ShippingEntries.ToListAsync();[m
[31m-    }[m
[31m-    public async Task<List<ShippingEntryViewModel>> GetModels()[m
[31m-    {[m
[31m-        await using var database = await dbContextFactory.CreateDbContextAsync();[m
[31m-[m
[31m-        List<ShippingEntryViewModel> models = new();[m
[31m-        List<ShippingEntry> entries = await database.ShippingEntries.ToListAsync();[m
[31m-        List<Product> products = await database.Products.ToListAsync();[m
[31m-        foreach (ShippingEntry entry in entries)[m
[31m-        {[m
[31m-            Product? product = products.FirstOrDefault(p => p.id == entry.item);[m
[31m-            if (product == null) continue;[m
[31m-            models.Add(new ShippingEntryViewModel(entry, product));[m
[31m-        }[m
[31m-        return models;[m
[31m-    }[m
[31m-    public async Task<ShippingEntryViewModel> UpdateInfoOrInsertNew(ShippingEntryViewModel model)[m
[31m-    {[m
[31m-        await using var database = await dbContextFactory.CreateDbContextAsync();[m
[31m-[m
[31m-        ShippingEntry? entryWithSameProduct = await database.ShippingEntries.FirstOrDefaultAsync(x => x.item == model.product.id);[m
[31m-[m
[31m-        if (entryWithSameProduct != null)[m
[31m-        {[m
[31m-            entryWithSameProduct.SetQuantity(entryWithSameProduct.quantity + (uint)model.quantity);[m
[31m-            await database.SaveChangesAsync();[m
[31m-            return new ShippingEntryViewModel(entryWithSameProduct, model.product);[m
[31m-        }[m
[31m-[m
[31m-[m
[31m-        float priceValue = 0;[m
[31m-        uint stockValue = 0;[m
[31m-        Price? price = await tmeService.GetPriceForAmountAsync(model.product.tmeID, (uint)model.quantity);[m
[31m-        StockProduct? stock = await tmeService.GetStockProductAsync(model.product.tmeID);[m
[31m-        if (price != null && stock != null)[m
[31m-        {[m
[31m-            priceValue = (float)price.PriceValue;[m
[31m-            stockValue = (uint)stock.Amount;[m
[31m-        }[m
[31m-[m
[31m-[m
[31m-        ShippingEntry? dbEntry = await database.ShippingEntries.FirstOrDefaultAsync(x => x.id == model.id);[m
[31m-        if (dbEntry != null)[m
[31m-        {[m
[31m-            dbEntry.SetItem(model.product.id);[m
[31m-            dbEntry.SetQuantity((uint)model.quantity);[m
[31m-            dbEntry.SetLastCheck(DateTime.UtcNow);[m
[31m-            dbEntry.SetStock(stockValue);[m
[31m-            dbEntry.SetPrice(priceValue);[m
[31m-        }[m
[31m-        else[m
[31m-        {[m
[31m-            dbEntry = new ShippingEntry(model.product.id, (uint)model.quantity, DateTime.UtcNow, stockValue, priceValue);[m
[31m-            await database.ShippingEntries.AddAsync(dbEntry);[m
[31m-        }[m
[31m-        await database.SaveChangesAsync();[m
[31m-        return new ShippingEntryViewModel(dbEntry, model.product);[m
[31m-    }[m
[31m-    public async Task<ShippingEntryViewModel> RefreshValue(ShippingEntryViewModel entry)[m
[31m-    {[m
[31m-        await using var database = await dbContextFactory.CreateDbContextAsync();[m
[31m-        [m
[31m-        Price? price = await tmeService.GetPriceForAmountAsync(entry.product.tmeID, (uint)entry.quantity);[m
[31m-        StockProduct? stock = await tmeService.GetStockProductAsync(entry.product.tmeID);[m
[31m-        if (price == null || stock == null) return entry;[m
[31m-[m
[31m-        ShippingEntry? dbEntry = await database.ShippingEntries.FirstOrDefaultAsync(x => x.id == entry.id);[m
[31m-        if (dbEntry == null) return entry;[m
[31m-        dbEntry.SetLastCheck(DateTime.UtcNow);[m
[31m-        dbEntry.SetPrice((float)price.PriceValue);[m
[31m-        dbEntry.SetStock((uint)stock.Amount);[m
[31m-        await database.SaveChangesAsync();[m
[31m-[m
[31m-        return new ShippingEntryViewModel(dbEntry, entry.product);[m
[31m-    }[m
[31m-}[m
\ No newline at end of file[m
[1mdiff --git a/Services/SystemSettingsService.cs b/Services/SystemSettingsService.cs[m
[1mdeleted file mode 100644[m
[1mindex 634b040..0000000[m
[1m--- a/Services/SystemSettingsService.cs[m
[1m+++ /dev/null[m
[36m@@ -1,95 +0,0 @@[m
[31m-using Magazynek.Data;[m
[31m-using Magazynek.Entities;[m
[31m-using Microsoft.AspNetCore.DataProtection;[m
[31m-using Microsoft.EntityFrameworkCore;[m
[31m-[m
[31m-[m
[31m-namespace Magazynek.Services[m
[31m-{[m
[31m-    public interface ISystemSettingsService[m
[31m-    {[m
[31m-        Task<List<SystemSetting>> GetSettings();[m
[31m-        Task<T> GetSetting<T>(string name);[m
[31m-        Task SaveSetting(SystemSetting systemSetting);[m
[31m-[m
[31m-        Task CreateStandardSettingsIfNotExist(List<SettingDefinition> neededSettings);[m
[31m-    }[m
[31m-[m
[31m-[m
[31m-    public class SystemSettingsService : ISystemSettingsService[m
[31m-    {[m
[31m-[m
[31m-        private readonly IDataProtector protector;[m
[31m-[m
[31m-        private readonly IDbContextFactory<DatabaseContext> dbContextFactory;[m
[31m-[m
[31m-        public SystemSettingsService(IDataProtectionProvider provider, IDbContextFactory<DatabaseContext> dbContextFactory, IConfiguration configuration)[m
[31m-        {[m
[31m-            this.dbContextFactory = dbContextFactory;[m
[31m-            protector = provider.CreateProtector("AppSettingKeys");[m
[31m-        }[m
[31m-[m
[31m-        public async Task<List<SystemSetting>> GetSettings()[m
[31m-        {[m
[31m-            await using var database = await dbContextFactory.CreateDbContextAsync();[m
[31m-            List<SystemSetting> settings = await database.SystemSettings.ToListAsync();[m
[31m-[m
[31m-            foreach (SystemSetting setting in settings)[m
[31m-            {[m
[31m-                try { setting.value = protector.Unprotect(setting.value); }[m
[31m-                catch { setting.value = ""; }[m
[31m-            }[m
[31m-[m
[31m-            return settings;[m
[31m-        }[m
[31m-        public async Task<T> GetSetting<T>(string name)[m
[31m-        {[m
[31m-            await using var database = await dbContextFactory.CreateDbContextAsync();[m
[31m-            SystemSetting? setting = await database.SystemSettings.FirstOrDefaultAsync(s => s.name == name);[m
[31m-            if (setting != null)[m
[31m-            {[m
[31m-                try { setting.value = protector.Unprotect(setting.value); }[m
[31m-                catch { return default!; }[m
[31m-[m
[31m-                return (typeof(T), setting.type) switch[m
[31m-                {[m
[31m-                    (Type t, SystemSetting.SettingType.STRING) when t == typeof(string) => (T)(object)setting.value!,[m
[31m-                    (Type t, SystemSetting.SettingType.INT) when t == typeof(int) => (T)(object)setting.i_value,[m
[31m-                    (Type t, SystemSetting.SettingType.BOOL) when t == typeof(bool) => (T)(object)setting.b_value,[m
[31m-                    (Type t, SystemSetting.SettingType.FLOAT) when t == typeof(float) => (T)(object)setting.f_value,[m
[31m-                    _ => default![m
[31m-                };[m
[31m-            }[m
[31m-            return default!;[m
[31m-        }[m
[31m-        public async Task SaveSetting(SystemSetting systemSetting)[m
[31m-        {[m
[31m-            await using var database = await dbContextFactory.CreateDbContextAsync();[m
[31m-[m
[31m-            SystemSetting? existingSetting = await database.SystemSettings.FirstOrDefaultAsync(s => s.name == systemSetting.name);[m
[31m-            if (existingSetting != null)[m
[31m-            {[m
[31m-                existingSetting.name = systemSetting.name;[m
[31m-                existingSetting.type = systemSetting.type;[m
[31m-                existingSetting.value = protector.Protect(systemSetting.value);[m
[31m-            }[m
[31m-            else await database.SystemSettings.AddAsync(systemSetting);[m
[31m-[m
[31m-            await database.SaveChangesAsync();[m
[31m-        }[m
[31m-[m
[31m-        public async Task CreateStandardSettingsIfNotExist(List<SettingDefinition> neededSettings)[m
[31m-        {[m
[31m-            await using var database = await dbContextFactory.CreateDbContextAsync();[m
[31m-            foreach (SettingDefinition setting in neededSettings)[m
[31m-            {[m
[31m-                if (!database.SystemSettings.Any(s => s.name == setting.Name))[m
[31m-                {[m
[31m-                    SystemSetting newSetting = new SystemSetting(setting.Name, setting.Type, protector.Protect(""));[m
[31m-                    await database.SystemSettings.AddAsync(newSetting);[m
[31m-                }[m
[31m-            }[m
[31m-            await database.SaveChangesAsync();[m
[31m-        }[m
[31m-    }[m
[31m-}[m
\ No newline at end of file[m
[1mdiff --git a/Services/TmeService.cs b/Services/TmeService.cs[m
[1mdeleted file mode 100644[m
[1mindex 0e961a4..0000000[m
[1m--- a/Services/TmeService.cs[m
[1m+++ /dev/null[m
[36m@@ -1,56 +0,0 @@[m
[31m-using System;[m
[31m-using System.Collections.Generic;[m
[31m-using System.Linq;[m
[31m-using System.Threading.Tasks;[m
[31m-using Magazynek.Data;[m
[31m-[m
[31m-namespace Magazynek.Services[m
[31m-{[m
[31m-    public interface ITmeService[m
[31m-    {[m
[31m-        Task<Price?> GetPriceForAmountAsync(string product, uint amount);[m
[31m-        Task<StockProduct?> GetStockProductAsync(string product);[m
[31m-    }[m
[31m-    public class TmeService : ITmeService[m
[31m-    {[m
[31m-        private readonly ISystemSettingsService settingsService;[m
[31m-[m
[31m-        public TmeService(ISystemSettingsService settingsService)[m
[31m-        {[m
[31m-            this.settingsService = settingsService;[m
[31m-        }[m
[31m-        public async Task<Price?> GetPriceForAmountAsync(string product, uint amount)[m
[31m-        {[m
[31m-            string token = await settingsService.GetSetting<string>("TME API token");[m
[31m-            [m
[31m-            ProductPricesResponse? pricesResponse = await TmeIntegrator.GetPricesAsync([product], token);[m
[31m-            if (pricesResponse == null) return null;[m
[31m-            if (pricesResponse.Data.ProductList.Count == 0) return null;[m
[31m-            if (pricesResponse.Data.ProductList[0].PriceList.Count == 0) return null;[m
[31m-[m
[31m-            if (amount < pricesResponse.Data.ProductList[0].PriceList[0].Amount) amount = (uint)pricesResponse.Data.ProductList[0].PriceList[0].Amount;[m
[31m-[m
[31m-            pricesResponse.Data.ProductList[0].PriceList =[m
[31m-                pricesResponse.Data.ProductList[0].PriceList[m
[31m-                    .OrderByDescending(p => p.Amount)[m
[31m-                    .ToList();[m
[31m-[m
[31m-            foreach (Price price in pricesResponse.Data.ProductList[0].PriceList)[m
[31m-            {[m
[31m-                if (price.Amount <= amount) return price;[m
[31m-            }[m
[31m-[m
[31m-            return null;[m
[31m-        }[m
[31m-        public async Task<StockProduct?> GetStockProductAsync(string product)[m
[31m-        {[m
[31m-            string token = await settingsService.GetSetting<string>("TME API token");[m
[31m-[m
[31m-            ProductStockResponse? stockResponse = await TmeIntegrator.GetStocksAsync([product], token);[m
[31m-            if (stockResponse == null) return null;[m
[31m-            if (stockResponse.Data.ProductList.Count == 0) return null;[m
[31m-            return stockResponse.Data.ProductList[0];[m
[31m-        }[m
[31m-    }[m
[31m-[m
[31m-}[m
\ No newline at end of file[m
[1mdiff --git a/Shared/BoolPresentation.razor b/Shared/BoolPresentation.razor[m
[1mdeleted file mode 100644[m
[1mindex 519e579..0000000[m
[1m--- a/Shared/BoolPresentation.razor[m
[1m+++ /dev/null[m
[36m@@ -1,23 +0,0 @@[m
[31m-<style>[m
[31m-    .bi-ban {[m
[31m-        color: #ff8080;[m
[31m-    }[m
[31m-    .bi-check-circle {[m
[31m-        color: #80ff80;[m
[31m-    }[m
[31m-</style>[m
[31m-[m
[31m-[m
[31m-@if(Value)[m
[31m-{[m
[31m-    <i class="bi bi-check-circle"></i>[m
[31m-}[m
[31m-else [m
[31m-{[m
[31m-    <i class="bi bi-ban"></i>[m
[31m-}[m
[31m-[m
[31m-[m
[31m-@code {[m
[31m-    [Parameter] public bool Value { get; set; }[m
[31m-}[m
\ No newline at end of file[m
[1mdiff --git a/Shared/MainLayout.razor b/Shared/MainLayout.razor[m
[1mdeleted file mode 100644[m
[1mindex c33672c..0000000[m
[1m--- a/Shared/MainLayout.razor[m
[1m+++ /dev/null[m
[36m@@ -1,14 +0,0 @@[m
[31m-ï»¿@inherits LayoutComponentBase[m
[31m-@inject NavigationManager NavigationManager[m
[31m-@inject IHttpContextAccessor HttpContextAccessor[m
[31m-[m
[31m-<PageTitle>Magazynek</PageTitle>[m
[31m-[m
[31m-<div class="page">[m
[31m-    <div class="sidebar">[m
[31m-        <NavMenu />[m
[31m-    </div>[m
[31m-    <div class="main">[m
[31m-        @Body[m
[31m-    </div>[m
[31m-</div>[m
\ No newline at end of file[m
[1mdiff --git a/Shared/MainLayout.razor.css b/Shared/MainLayout.razor.css[m
[1mdeleted file mode 100644[m
[1mindex d7357a8..0000000[m
[1m--- a/Shared/MainLayout.razor.css[m
[1m+++ /dev/null[m
[36m@@ -1,99 +0,0 @@[m
[31m-.page {[m
[31m-    position: relative;[m
[31m-    display: flex;[m
[31m-    flex-direction: column;[m
[31m-}[m
[31m-[m
[31m-.main {[m
[31m-    flex: 1;[m
[31m-    background-color: #383838;[m
[31m-    color: #e0e0e0;[m
[31m-    padding: 2em;[m
[31m-}[m
[31m-.center {[m
[31m-    text-align: center !important;[m
[31m-    justify-content: center !important;[m
[31m-}[m
[31m-.btn-process {[m
[31m-    width: 100%;[m
[31m-    padding: 0.5rem;[m
[31m-    font-size: 1rem;[m
[31m-    background-color: #4caf50;[m
[31m-    color: white;[m
[31m-    border: none;[m
[31m-    border-radius: 4px;[m
[31m-    cursor: pointer;[m
[31m-    display: flex;[m
[31m-    justify-content: center;[m
[31m-    align-items: center;[m
[31m-}[m
[31m-[m
[31m-.btn-process:hover {[m
[31m-    background-color: #45a049;[m
[31m-}[m
[31m-[m
[31m-.btn-process i {[m
[31m-    margin-left: 0.5rem;[m
[31m-}[m
[31m-[m
[31m-.sidebar {[m
[31m-    background-image: linear-gradient(180deg, #2a2a2a 0%, #383838 100%);[m
[31m-    box-shadow: 4px 0 8px rgba(0, 0, 0, 0.6);[m
[31m-}[m
[31m-[m
[31m-.top-row {[m
[31m-    background-color: #f7f7f7;[m
[31m-    border-bottom: 1px solid #d6d5d5;[m
[31m-    justify-content: flex-end;[m
[31m-    height: 3.5rem;[m
[31m-    display: flex;[m
[31m-    align-items: center;[m
[31m-}[m
[31m-[m
[31m-    .top-row ::deep a, .top-row .btn-link {[m
[31m-        white-space: nowrap;[m
[31m-        margin-left: 1.5rem;[m
[31m-    }[m
[31m-[m
[31m-    .top-row a:first-child {[m
[31m-        overflow: hidden;[m
[31m-        text-overflow: ellipsis;[m
[31m-    }[m
[31m-[m
[31m-@media (max-width: 640.98px) {[m
[31m-    .top-row:not(.auth) {[m
[31m-        display: none;[m
[31m-    }[m
[31m-[m
[31m-    .top-row.auth {[m
[31m-        justify-content: space-between;[m
[31m-    }[m
[31m-[m
[31m-    .top-row a, .top-row .btn-link {[m
[31m-        margin-left: 0;[m
[31m-    }[m
[31m-}[m
[31m-[m
[31m-@media (min-width: 641px) {[m
[31m-    .page {[m
[31m-        flex-direction: row;[m
[31m-    }[m
[31m-[m
[31m-    .sidebar {[m
[31m-        width: 250px;[m
[31m-        height: 100vh;[m
[31m-        position: sticky;[m
[31m-        top: 0;[m
[31m-    }[m
[31m-[m
[31m-    .top-row {[m
[31m-        position: sticky;[m
[31m-        top: 0;[m
[31m-        z-index: 1;[m
[31m-    }[m
[31m-[m
[31m-    .top-row, article {[m
[31m-        padding-left: 2rem !important;[m
[31m-        padding-right: 1.5rem !important;[m
[31m-    }[m
[31m-}[m
[1mdiff --git a/Shared/NavMenu.razor b/Shared/NavMenu.razor[m
[1mdeleted file mode 100644[m
[1mindex 3676390..0000000[m
[1m--- a/Shared/NavMenu.razor[m
[1m+++ /dev/null[m
[36m@@ -1,40 +0,0 @@[m
[31m-ï»¿@inject IHttpContextAccessor HttpContextAccessor[m
[31m-[m
[31m-[m
[31m-[m
[31m-<div class="top-row navbar navbar-dark">[m
[31m-    <div class="container-fluid">[m
[31m-        <img src="aants_full_white.png" alt="ANTSLAB" height="56">[m
[31m-    </div>[m
[31m-</div>[m
[31m-[m
[31m-<div class="nav-scrollable">[m
[31m-    <nav class="flex-column">[m
[31m-    <div class="nav-item px-3">[m
[31m-            <NavLink class="nav-link" href="/do-project">[m
[31m-                <i class="bi bi-building-gear"></i> Realizacje[m
[31m-            </NavLink>[m
[31m-        </div>[m
[31m-        <div class="nav-item px-3">[m
[31m-            <NavLink class="nav-link" href="/projects">[m
[31m-                <i class="bi bi-collection"></i> Projekty[m
[31m-            </NavLink>[m
[31m-        </div>[m
[31m-        <div class="nav-item px-3">[m
[31m-            <NavLink class="nav-link" href="/" Match="NavLinkMatch.All">[m
[31m-                <i class="bi bi-box2"></i> IloÅ›ci[m
[31m-            </NavLink>[m
[31m-        </div>[m
[31m-        <div class="nav-item px-3">[m
[31m-            <NavLink class="nav-link" href="products">[m
[31m-                <i class="bi bi-wrench-adjustable"></i> Produkty[m
[31m-            </NavLink>[m
[31m-        </div>[m
[31m-        <div class="menu-spacer"></div>[m
[31m-        <div class="nav-item px-3">[m
[31m-            <NavLink class="nav-link" href="settings">[m
[31m-                <i class="bi bi-gear-wide-connected"></i> Ustawienia[m
[31m-            </NavLink>[m
[31m-        </div>[m
[31m-    </nav>[m
[31m-</div>[m
[1mdiff --git a/Shared/NavMenu.razor.css b/Shared/NavMenu.razor.css[m
[1mdeleted file mode 100644[m
[1mindex d426991..0000000[m
[1m--- a/Shared/NavMenu.razor.css[m
[1m+++ /dev/null[m
[36m@@ -1,68 +0,0 @@[m
[31m-.top-row {[m
[31m-    background-color: rgba(0,0,0,0.4);[m
[31m-    height: 5rem;[m
[31m-}[m
[31m-[m
[31m-.navbar-brand {[m
[31m-    font-size: 1.1rem;[m
[31m-}[m
[31m-[m
[31m-.bi {[m
[31m-    width: 2rem;[m
[31m-    font-size: 1.1rem;[m
[31m-    vertical-align: text-top;[m
[31m-    top: -2px;[m
[31m-}[m
[31m-[m
[31m-.navbar>.container-fluid {[m
[31m-    align-items: center;[m
[31m-    justify-content: center;[m
[31m-}[m
[31m-[m
[31m-.nav-item {[m
[31m-    font-size: 0.9rem;[m
[31m-    padding-bottom: 0.5rem;[m
[31m-}[m
[31m-[m
[31m-    .nav-item:first-of-type {[m
[31m-        padding-top: 1rem;[m
[31m-    }[m
[31m-[m
[31m-    .nav-item:last-of-type {[m
[31m-        padding-bottom: 1rem;[m
[31m-    }[m
[31m-[m
[31m-    .nav-item ::deep a {[m
[31m-        color: #d7d7d7;[m
[31m-        border-radius: 4px;[m
[31m-        height: 3rem;[m
[31m-        display: flex;[m
[31m-        align-items: center;[m
[31m-        line-height: 3rem;[m
[31m-    }[m
[31m-[m
[31m-.nav-item ::deep a.active {[m
[31m-    background-color: rgba(255,255,255,0.25);[m
[31m-    color: white;[m
[31m-}[m
[31m-[m
[31m-.nav-item ::deep a:hover {[m
[31m-    background-color: rgba(255,255,255,0.1);[m
[31m-    color: white;[m
[31m-}[m
[31m-[m
[31m-@media (min-width: 641px) {[m
[31m-    .navbar-toggler {[m
[31m-        display: none;[m
[31m-    }[m
[31m-[m
[31m-    .collapse {[m
[31m-        /* Never collapse the sidebar for wide screens */[m
[31m-        display: block;[m
[31m-    }[m
[31m-    [m
[31m-    .nav-scrollable {[m
[31m-        /* Allow sidebar to scroll for tall menus */[m
[31m-        overflow-y: auto;[m
[31m-    }[m
[31m-}[m
[1mdiff --git a/_Imports.razor b/_Imports.razor[m
[1mdeleted file mode 100644[m
[1mindex af44d73..0000000[m
[1m--- a/_Imports.razor[m
[1m+++ /dev/null[m
[36m@@ -1,10 +0,0 @@[m
[31m-ï»¿@using System.Net.Http[m
[31m-@using Microsoft.AspNetCore.Authorization[m
[31m-@using Microsoft.AspNetCore.Components.Authorization[m
[31m-@using Microsoft.AspNetCore.Components.Forms[m
[31m-@using Microsoft.AspNetCore.Components.Routing[m
[31m-@using Microsoft.AspNetCore.Components.Web[m
[31m-@using Microsoft.AspNetCore.Components.Web.Virtualization[m
[31m-@using Microsoft.JSInterop[m
[31m-@using Magazynek[m
[31m-@using Magazynek.Shared[m
[1mdiff --git a/appsettings.Development.json b/appsettings.Development.json[m
[1mdeleted file mode 100644[m
[1mindex f042c67..0000000[m
[1m--- a/appsettings.Development.json[m
[1m+++ /dev/null[m
[36m@@ -1,9 +0,0 @@[m
[31m-{[m
[31m-  "DetailedErrors": true,[m
[31m-  "Logging": {[m
[31m-    "LogLevel": {[m
[31m-      "Default": "Information",[m
[31m-      "Microsoft.AspNetCore": "Warning"[m
[31m-    }[m
[31m-  }[m
[31m-}[m
[1mdiff --git a/deploy.sh b/deploy.sh[m
[1mdeleted file mode 100644[m
[1mindex d51d139..0000000[m
[1m--- a/deploy.sh[m
[1m+++ /dev/null[m
[36m@@ -1,13 +0,0 @@[m
[31m-#!/bin/bash[m
[31m-set -e[m
[31m-[m
[31m-echo "===> Stopping service"[m
[31m-sudo systemctl stop magazynek.service[m
[31m-[m
[31m-echo "===> Building app (Release)"[m
[31m-dotnet publish -c Release -o /home/osmc/Magazynek/publish[m
[31m-[m
[31m-echo "===> Starting service"[m
[31m-sudo systemctl start magazynek.service[m
[31m-[m
[31m-echo "===> Done!"[m
\ No newline at end of file[m
[1mdiff --git a/launch.json b/launch.json[m
[1mdeleted file mode 100644[m
[1mindex 3dc57df..0000000[m
[1m--- a/launch.json[m
[1m+++ /dev/null[m
[36m@@ -1,21 +0,0 @@[m
[31m-{[m
[31m-    "name": ".NET Core Remote Launch - Framework Dependent (console)",[m
[31m-    "type": "coreclr",[m
[31m-    "request": "launch",[m
[31m-    "program": "~/dotnet/dotnet",[m
[31m-    "args": [[m
[31m-        "./MyConsoleApp.dll"[m
[31m-    ],[m
[31m-        "cwd": "~/Magazynek/Magazynek",[m
[31m-        "stopAtEntry": false,[m
[31m-        "console": "internalConsole",[m
[31m-        "pipeTransport": {[m
[31m-            "pipeCwd": "${workspaceRoot}",[m
[31m-            "pipeProgram": "/usr/bin/ssh",[m
[31m-            "pipeArgs": [[m
[31m-                "-T", "-i", "mysshkeyfile",[m
[31m-                "osmc@192.168.100.196"[m
[31m-            ],[m
[31m-            "debuggerPath": "~/vsdbg/vsdbg"[m
[31m-            }[m
[31m-    }[m
\ No newline at end of file[m
[1mdiff --git a/wwwroot/aants_full_white.png b/wwwroot/aants_full_white.png[m
[1mdeleted file mode 100644[m
[1mindex 963f858..0000000[m
Binary files a/wwwroot/aants_full_white.png and /dev/null differ
[1mdiff --git a/wwwroot/css/bootstrap/bootstrap.min.css b/wwwroot/css/bootstrap/bootstrap.min.css[m
[1mdeleted file mode 100644[m
[1mindex 02ae65b..0000000[m
[1m--- a/wwwroot/css/bootstrap/bootstrap.min.css[m
[1m+++ /dev/null[m
[36m@@ -1,7 +0,0 @@[m
[31m-@charset "UTF-8";/*![m
[31m- * Bootstrap v5.1.0 (https://getbootstrap.com/)[m
[31m- * Copyright 2011-2021 The Bootstrap Authors[m
[31m- * Copyright 2011-2021 Twitter, Inc.[m
[31m- * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)[m
[31m- */:root{--bs-blue:#0d6efd;--bs-indigo:#6610f2;--bs-purple:#6f42c1;--bs-pink:#d63384;--bs-red:#dc3545;--bs-orange:#fd7e14;--bs-yellow:#ffc107;--bs-green:#198754;--bs-teal:#20c997;--bs-cyan:#0dcaf0;--bs-white:#fff;--bs-gray:#6c757d;--bs-gray-dark:#343a40;--bs-gray-100:#f8f9fa;--bs-gray-200:#e9ecef;--bs-gray-300:#dee2e6;--bs-gray-400:#ced4da;--bs-gray-500:#adb5bd;--bs-gray-600:#6c757d;--bs-gray-700:#495057;--bs-gray-800:#343a40;--bs-gray-900:#212529;--bs-primary:#0d6efd;--bs-secondary:#6c757d;--bs-success:#198754;--bs-info:#0dcaf0;--bs-warning:#ffc107;--bs-danger:#dc3545;--bs-light:#f8f9fa;--bs-dark:#212529;--bs-primary-rgb:13,110,253;--bs-secondary-rgb:108,117,125;--bs-success-rgb:25,135,84;--bs-info-rgb:13,202,240;--bs-warning-rgb:255,193,7;--bs-danger-rgb:220,53,69;--bs-light-rgb:248,249,250;--bs-dark-rgb:33,37,41;--bs-white-rgb:255,255,255;--bs-black-rgb:0,0,0;--bs-body-rgb:33,37,41;--bs-font-sans-serif:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--bs-font-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--bs-gradient:linear-gradient(180deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0));--bs-body-font-family:var(--bs-font-sans-serif);--bs-body-font-size:1rem;--bs-body-font-weight:400;--bs-body-line-height:1.5;--bs-body-color:#212529;--bs-body-bg:#fff}*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:var(--bs-body-font-family);font-size:var(--bs-body-font-size);font-weight:var(--bs-body-font-weight);line-height:va